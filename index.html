<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TalentEdge AI - Ultimate Data Scraping &amp; AI Client Outreach Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            /* Primitive Color Tokens */
            --color-white: rgba(255, 255, 255, 1);
            --color-black: rgba(0, 0, 0, 1);
            --color-cream-50: rgba(252, 252, 249, 1);
            --color-cream-100: rgba(255, 255, 253, 1);
            --color-gray-200: rgba(245, 245, 245, 1);
            --color-gray-300: rgba(167, 169, 169, 1);
            --color-gray-400: rgba(119, 124, 124, 1);
            --color-slate-500: rgba(98, 108, 113, 1);
            --color-brown-600: rgba(94, 82, 64, 1);
            --color-charcoal-700: rgba(31, 33, 33, 1);
            --color-charcoal-800: rgba(38, 40, 40, 1);
            --color-slate-900: rgba(19, 52, 59, 1);
            --color-teal-300: rgba(50, 184, 198, 1);
            --color-teal-400: rgba(45, 166, 178, 1);
            --color-teal-500: rgba(33, 128, 141, 1);
            --color-teal-600: rgba(29, 116, 128, 1);
            --color-teal-700: rgba(26, 104, 115, 1);
            --color-teal-800: rgba(41, 150, 161, 1);
            --color-red-400: rgba(255, 84, 89, 1);
            --color-red-500: rgba(192, 21, 47, 1);
            --color-orange-400: rgba(230, 129, 97, 1);
            --color-orange-500: rgba(168, 75, 47, 1);

            /* RGB versions for opacity control */
            --color-brown-600-rgb: 94, 82, 64;
            --color-teal-500-rgb: 33, 128, 141;
            --color-slate-900-rgb: 19, 52, 59;
            --color-slate-500-rgb: 98, 108, 113;
            --color-red-500-rgb: 192, 21, 47;
            --color-red-400-rgb: 255, 84, 89;
            --color-orange-500-rgb: 168, 75, 47;
            --color-orange-400-rgb: 230, 129, 97;

            /* Background color tokens (Light Mode) */
            --color-bg-1: rgba(59, 130, 246, 0.08);
            --color-bg-2: rgba(245, 158, 11, 0.08);
            --color-bg-3: rgba(34, 197, 94, 0.08);
            --color-bg-4: rgba(239, 68, 68, 0.08);
            --color-bg-5: rgba(147, 51, 234, 0.08);
            --color-bg-6: rgba(249, 115, 22, 0.08);
            --color-bg-7: rgba(236, 72, 153, 0.08);
            --color-bg-8: rgba(6, 182, 212, 0.08);

            /* Semantic Color Tokens (Light Mode) */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(var(--color-brown-600-rgb), 0.12);
            --color-secondary-hover: rgba(var(--color-brown-600-rgb), 0.2);
            --color-secondary-active: rgba(var(--color-brown-600-rgb), 0.25);
            --color-border: rgba(var(--color-brown-600-rgb), 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(var(--color-brown-600-rgb), 0.12);
            --color-card-border-inner: rgba(var(--color-brown-600-rgb), 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(var(--color-teal-500-rgb), 0.4);
            --color-select-caret: rgba(var(--color-slate-900-rgb), 0.8);

            /* Common style patterns */
            --focus-ring: 0 0 0 3px var(--color-focus-ring);
            --focus-outline: 2px solid var(--color-primary);
            --status-bg-opacity: 0.15;
            --status-border-opacity: 0.25;
            --select-caret-light: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23134252' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            --select-caret-dark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");

            /* RGB versions for opacity control */
            --color-success-rgb: 33, 128, 141;
            --color-error-rgb: 192, 21, 47;
            --color-warning-rgb: 168, 75, 47;
            --color-info-rgb: 98, 108, 113;

            /* Typography */
            --font-family-base: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-family-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
            --font-size-xs: 11px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.5;
            --letter-spacing-tight: -0.01em;

            /* Spacing */
            --space-0: 0;
            --space-1: 1px;
            --space-2: 2px;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;

            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

            /* Animation */
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);

            /* Layout */
            --container-sm: 640px;
            --container-md: 768px;
            --container-lg: 1024px;
            --container-xl: 1280px;

            /* Industry colors */
            --color-insurance: #3B82F6;
            --color-coaching: #10B981;
            --color-builders: #F59E0B;
        }

        /* Base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: var(--font-size-base);
            font-family: var(--font-family-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            -webkit-font-smoothing: antialiased;
        }

        body {
            margin: 0;
            padding: 0;
        }

        /* Layout */
        .app-container {
            display: flex;
            height: 100vh;
        }

        .sidebar {
            width: 280px;
            background-color: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: var(--space-24);
            overflow-y: auto;
        }

        .main-content {
            flex: 1;
            padding: var(--space-24);
            overflow-y: auto;
        }

        /* Header */
        .app-header {
            margin-bottom: var(--space-32);
        }

        .app-title {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
            margin-bottom: var(--space-8);
        }

        .app-subtitle {
            color: var(--color-text-secondary);
            font-size: var(--font-size-base);
        }

        /* Navigation */
        .nav-menu {
            list-style: none;
            margin-bottom: var(--space-32);
        }

        .nav-item {
            margin-bottom: var(--space-8);
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: var(--space-12) var(--space-16);
            color: var(--color-text);
            text-decoration: none;
            border-radius: var(--radius-base);
            transition: background-color var(--duration-fast) var(--ease-standard);
        }

        .nav-link:hover {
            background-color: var(--color-secondary);
        }

        .nav-link.active {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
        }

        .nav-link i {
            margin-right: var(--space-12);
            width: 16px;
        }

        /* Cards */
        .card {
            background-color: var(--color-surface);
            border-radius: var(--radius-lg);
            border: 1px solid var(--color-card-border);
            box-shadow: var(--shadow-sm);
            padding: var(--space-24);
            margin-bottom: var(--space-24);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-20);
        }

        .card-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
        }

        /* Forms */
        .form-group {
            margin-bottom: var(--space-16);
        }

        .form-label {
            display: block;
            margin-bottom: var(--space-8);
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-sm);
            color: var(--color-text);
        }

        .form-control {
            display: block;
            width: 100%;
            padding: var(--space-12) var(--space-16);
            font-size: var(--font-size-md);
            line-height: 1.5;
            color: var(--color-text);
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            transition: border-color var(--duration-fast) var(--ease-standard);
        }

        .form-control:focus {
            border-color: var(--color-primary);
            outline: none;
            box-shadow: var(--focus-ring);
        }

        select.form-control {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: var(--select-caret-light);
            background-repeat: no-repeat;
            background-position: right var(--space-12) center;
            background-size: 16px;
            padding-right: var(--space-32);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-12) var(--space-20);
            border-radius: var(--radius-base);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            line-height: 1.5;
            cursor: pointer;
            transition: all var(--duration-normal) var(--ease-standard);
            border: none;
            text-decoration: none;
        }

        .btn--primary {
            background: var(--color-primary);
            color: var(--color-btn-primary-text);
        }

        .btn--primary:hover {
            background: var(--color-primary-hover);
        }

        .btn--secondary {
            background: var(--color-secondary);
            color: var(--color-text);
        }

        .btn--secondary:hover {
            background: var(--color-secondary-hover);
        }

        .btn--sm {
            padding: var(--space-8) var(--space-12);
            font-size: var(--font-size-sm);
        }

        /* Job listing styles */
        .job-listing {
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            margin-bottom: var(--space-16);
            background-color: var(--color-surface);
        }

        .job-listing:hover {
            border-color: var(--color-primary);
            box-shadow: var(--shadow-md);
        }

        .job-title {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
            margin-bottom: var(--space-8);
        }

        .job-company {
            font-size: var(--font-size-base);
            color: var(--color-primary);
            margin-bottom: var(--space-4);
        }

        .job-details {
            display: flex;
            gap: var(--space-16);
            margin-bottom: var(--space-12);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .job-actions {
            display: flex;
            gap: var(--space-8);
        }

        /* Company card styles */
        .company-card {
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            margin-bottom: var(--space-16);
            background-color: var(--color-surface);
        }

        .company-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: var(--space-12);
        }

        .company-name {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
            margin-bottom: var(--space-4);
        }

        .company-industry {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .company-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-12);
            margin-top: var(--space-12);
        }

        .stat {
            text-align: center;
            padding: var(--space-8);
            background-color: var(--color-bg-1);
            border-radius: var(--radius-sm);
        }

        .stat-value {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
        }

        .stat-label {
            font-size: var(--font-size-xs);
            color: var(--color-text-secondary);
            margin-top: var(--space-2);
        }

        /* Pipeline styles */
        .pipeline {
            display: flex;
            gap: var(--space-16);
            overflow-x: auto;
            padding-bottom: var(--space-16);
        }

        .pipeline-column {
            min-width: 280px;
            background-color: var(--color-bg-1);
            border-radius: var(--radius-base);
            padding: var(--space-16);
        }

        .pipeline-header {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-16);
        }

        .pipeline-title {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
            margin-left: var(--space-8);
        }

        .pipeline-count {
            background-color: var(--color-text-secondary);
            color: var(--color-surface);
            border-radius: var(--radius-full);
            padding: var(--space-2) var(--space-8);
            font-size: var(--font-size-xs);
            margin-left: auto;
        }

        .prospect-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-12);
            margin-bottom: var(--space-12);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-standard);
        }

        .prospect-card:hover {
            box-shadow: var(--shadow-md);
        }

        .prospect-name {
            font-weight: var(--font-weight-medium);
            color: var(--color-text);
            margin-bottom: var(--space-4);
        }

        .prospect-company {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        /* Status indicators */
        .status {
            display: inline-flex;
            align-items: center;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-full);
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-xs);
        }

        .status--new {
            background-color: rgba(59, 130, 246, var(--status-bg-opacity));
            color: #3B82F6;
        }

        .status--contacted {
            background-color: rgba(245, 158, 11, var(--status-bg-opacity));
            color: #F59E0B;
        }

        .status--responded {
            background-color: rgba(16, 185, 129, var(--status-bg-opacity));
            color: #10B981;
        }

        .status--demo {
            background-color: rgba(139, 92, 246, var(--status-bg-opacity));
            color: #8B5CF6;
        }

        .status--pilot {
            background-color: rgba(239, 68, 68, var(--status-bg-opacity));
            color: #EF4444;
        }

        .status--client {
            background-color: rgba(5, 150, 105, var(--status-bg-opacity));
            color: #059669;
        }

        /* Metrics grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
            margin-bottom: var(--space-24);
        }

        .metric-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            text-align: center;
        }

        .metric-value {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
        }

        .metric-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-top: var(--space-4);
        }

        .metric-change {
            font-size: var(--font-size-xs);
            margin-top: var(--space-4);
        }

        .metric-change--positive {
            color: var(--color-success);
        }

        .metric-change--negative {
            color: var(--color-error);
        }

        /* Email template styles */
        .email-template {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            margin-bottom: var(--space-16);
        }

        .template-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-12);
        }

        .template-name {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text);
        }

        .template-industry {
            font-size: var(--font-size-xs);
            padding: var(--space-2) var(--space-6);
            border-radius: var(--radius-sm);
            background-color: var(--color-bg-2);
            color: var(--color-text);
        }

        .template-preview {
            background-color: var(--color-bg-1);
            padding: var(--space-12);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            line-height: 1.6;
            color: var(--color-text-secondary);
        }

        /* Utility classes */
        .hidden {
            display: none;
        }

        .text-center {
            text-align: center;
        }

        .flex {
            display: flex;
        }

        .items-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .gap-8 {
            gap: var(--space-8);
        }

        .gap-16 {
            gap: var(--space-16);
        }

        .mb-16 {
            margin-bottom: var(--space-16);
        }

        .mt-16 {
            margin-top: var(--space-16);
        }

        /* Industry-specific styling */
        .industry-insurance {
            border-left: 4px solid var(--color-insurance);
        }

        .industry-coaching {
            border-left: 4px solid var(--color-coaching);
        }

        .industry-builders {
            border-left: 4px solid var(--color-builders);
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--color-border);
            }

            .pipeline {
                flex-direction: column;
            }

            .pipeline-column {
                min-width: auto;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="app-header">
                <h1 class="app-title">TalentEdge AI</h1>
                <p class="app-subtitle">Ultimate Data Scraping &amp; AI Outreach Platform</p>
                <div style="margin-top: 16px; padding: 12px; background: var(--color-bg-1); border-radius: var(--radius-base); font-size: 11px; line-height: 1.4;">
                    <div style="font-weight: 600; margin-bottom: 4px;">🚀 LIVE STATUS</div>
                    <div>📊 25,000+ Prospects Discovered</div>
                    <div>📧 47,000+ Emails Sent</div>
                    <div>📞 12,000+ AI Voice Calls Made</div>
                    <div>💰 £420K+ Revenue Generated</div>
                </div>
            </div>

            <nav>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-section="scraping">
                            <i class="fas fa-spider"></i>
                            Data Scraping Engine
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="intelligence">
                            <i class="fas fa-brain"></i>
                            Business Intelligence
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="github">
                            <i class="fab fa-github"></i>
                            GitHub Talent Intelligence
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="portal">
                            <i class="fas fa-user-circle"></i>
                            Candidate Portal
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="candidates">
                            <i class="fas fa-user-tie"></i>
                            Candidate Intelligence
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="automation">
                            <i class="fas fa-robot"></i>
                            Email Automation
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="crm">
                            <i class="fas fa-users-cog"></i>
                            Advanced CRM
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="workflows">
                            <i class="fas fa-project-diagram"></i>
                            Automation Workflows
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="analytics">
                            <i class="fas fa-chart-bar"></i>
                            Advanced Analytics
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="integration">
                            <i class="fas fa-plug"></i>
                            Integration Guide
                        </a>
                    </li>
                </ul>
            </nav>

            <!-- Live Scraping Status -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Live Scraping Status</h3>
                </div>
                <div style="margin-bottom: 16px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--color-border);">
                        <span style="font-size: 12px;">Google Maps</span>
                        <span class="status status--success" style="font-size: 10px;">ACTIVE</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--color-border);">
                        <span style="font-size: 12px;">Companies House</span>
                        <span class="status status--success" style="font-size: 10px;">ACTIVE</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid var(--color-border);">
                        <span style="font-size: 12px;">LinkedIn</span>
                        <span class="status status--success" style="font-size: 10px;">ACTIVE</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0;">
                        <span style="font-size: 12px;">Voice AI Calls</span>
                        <span class="status status--success" style="font-size: 10px;">12 ACTIVE</span>
                    </div>
                </div>
                <button class="btn btn--primary btn--sm" onclick="startBulkScraping()" style="width: 100%; margin-bottom: 8px;">
                    <i class="fas fa-play"></i> Start Bulk Discovery
                </button>
                <button class="btn btn--secondary btn--sm" onclick="viewScrapingLogs()" style="width: 100%;">
                    <i class="fas fa-list"></i> View Activity Logs
                </button>
            </div>

            <!-- API Status Dashboard -->
            <div class="card" style="border: 2px solid var(--color-warning); background: var(--color-bg-2);">
                <div class="card-header">
                    <h3 class="card-title" style="font-size: 14px;">⚠️ API Configuration Required</h3>
                </div>
                <div style="font-size: 11px; line-height: 1.5; margin-bottom: 12px;">
                    <strong>Security Notice:</strong> This demo runs client-side only. For production use, implement a secure backend server to handle API requests and protect your keys.
                </div>
                <button class="btn btn--primary btn--sm" onclick="showAPIConfiguration()" style="width: 100%;">
                    <i class="fas fa-cog"></i> Configure APIs
                </button>
            </div>
            
            <!-- Quick Actions -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Quick Actions</h3>
                </div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <button class="btn btn--primary btn--sm" onclick="launchVoiceCampaign()">
                        <i class="fas fa-phone"></i> Launch Voice Campaign
                    </button>
                    <button class="btn btn--primary btn--sm" onclick="startEmailSequence()">
                        <i class="fas fa-envelope-open-text"></i> Start Email Sequence
                    </button>
                    <button class="btn btn--secondary btn--sm" onclick="exportProspectData()">
                        <i class="fas fa-download"></i> Export Prospect Data
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Data Scraping Engine Section -->
            <div id="scraping-section" class="section active-section">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">25,000</div>
                        <div class="metric-label">Prospects Discovered</div>
                        <div class="metric-change metric-change--positive">↗ +2,450 this week</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">18,500</div>
                        <div class="metric-label">Companies Enriched</div>
                        <div class="metric-change metric-change--positive">↗ 92% accuracy rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">3</div>
                        <div class="metric-label">Active Sources</div>
                        <div class="metric-change metric-change--positive">↗ All systems operational</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Multi-Source Data Scraping Engine</h2>
                        <button class="btn btn--primary" onclick="configureScrapingSources()">
                            <i class="fas fa-cogs"></i> Configure Sources
                        </button>
                    </div>
                    
                    <!-- Scraping Sources -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <!-- Google Maps Scraper -->
                        <div class="card" style="margin-bottom: 0; border: 2px solid var(--color-success);">
                            <div class="card-header" style="margin-bottom: 12px;">
                                <h4 style="margin: 0; display: flex; align-items: center;">🗺️ Google Maps Scraper</h4>
                                <span class="status status--success">ACTIVE</span>
                            </div>
                            <div style="font-size: 12px; line-height: 1.4; margin-bottom: 12px;">
                                <div><strong>450</strong> insurance brokers London</div>
                                <div><strong>280</strong> business coaches Manchester</div>
                                <div><strong>320</strong> builders merchants Birmingham</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="startGoogleMapsSearch()">
                                <i class="fas fa-search"></i> Start Search
                            </button>
                        </div>
                        
                        <!-- Companies House Scraper -->
                        <div class="card" style="margin-bottom: 0; border: 2px solid var(--color-success);">
                            <div class="card-header" style="margin-bottom: 12px;">
                                <h4 style="margin: 0; display: flex; align-items: center;">🏢 Companies House API</h4>
                                <span class="status status--success">ACTIVE</span>
                            </div>
                            <div style="font-size: 12px; line-height: 1.4; margin-bottom: 12px;">
                                <div>✓ Director information</div>
                                <div>✓ Financial data &amp; filings</div>
                                <div>✓ Company compliance status</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="enrichCompanyData()">
                                <i class="fas fa-database"></i> Enrich Data
                            </button>
                        </div>
                        
                        <!-- LinkedIn Intelligence -->
                        <div class="card" style="margin-bottom: 0; border: 2px solid var(--color-success);">
                            <div class="card-header" style="margin-bottom: 12px;">
                                <h4 style="margin: 0; display: flex; align-items: center;">💼 LinkedIn Intelligence</h4>
                                <span class="status status--success">ACTIVE</span>
                            </div>
                            <div style="font-size: 12px; line-height: 1.4; margin-bottom: 12px;">
                                <div>✓ Profile &amp; contact discovery</div>
                                <div>✓ Company employee mapping</div>
                                <div>✓ Job posting analysis</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="discoverLinkedInContacts()">
                                <i class="fas fa-user-plus"></i> Discover Contacts
                            </button>
                        </div>
                    </div>
                    
                    <!-- Live Scraping Results -->
                    <div id="scraping-results"></div>
                </div>
            </div>

            <!-- AI Voice Calling Section -->
            <div id="voice-section" class="section hidden">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">12,000</div>
                        <div class="metric-label">Total Calls Made</div>
                        <div class="metric-change metric-change--positive">↗ +450 this week</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">19.5%</div>
                        <div class="metric-label">Connect Rate</div>
                        <div class="metric-change metric-change--positive">↗ Above industry avg</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">380</div>
                        <div class="metric-label">Appointments Booked</div>
                        <div class="metric-change metric-change--positive">↗ 8.7% conversion</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">AI-Powered Voice Calling System</h2>
                        <button class="btn btn--primary" onclick="createVoiceCampaign()">
                            <i class="fas fa-plus"></i> New Voice Campaign
                        </button>
                    </div>
                    
                    <!-- Active Voice Campaigns -->
                    <div id="voice-campaigns"></div>
                    
                    <!-- Call Performance Chart -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Call Performance Analytics</h3>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="callPerformanceChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GitHub Talent Intelligence Section -->
            <div id="github-section" class="section hidden">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">1,250</div>
                        <div class="metric-label">GitHub Profiles Analyzed</div>
                        <div class="metric-change metric-change--positive">↗ AI-powered analysis</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">187</div>
                        <div class="metric-label">Qualified Developers</div>
                        <div class="metric-change metric-change--positive">↗ 15% match rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">89</div>
                        <div class="metric-label">Senior Level</div>
                        <div class="metric-change metric-change--positive">↗ 47% senior ratio</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">65</div>
                        <div class="metric-label">Available Now</div>
                        <div class="metric-change metric-change--positive">↗ Actively seeking</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">GitHub Talent Intelligence Engine</h2>
                        <button class="btn btn--primary" onclick="searchGitHubTalent()">
                            <i class="fab fa-github"></i> Search GitHub Talent
                        </button>
                    </div>
                    
                    <div id="github-developers"></div>
                </div>
            </div>
            
            <!-- Candidate Portal Section -->
            <div id="portal-section" class="section hidden">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">342</div>
                        <div class="metric-label">Registered Candidates</div>
                        <div class="metric-change metric-change--positive">↗ +28 this week</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">128</div>
                        <div class="metric-label">Active Applications</div>
                        <div class="metric-change metric-change--positive">↗ 37% conversion</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">215</div>
                        <div class="metric-label">Assessments Completed</div>
                        <div class="metric-change metric-change--positive">↗ 63% completion rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">156</div>
                        <div class="metric-label">Certifications Verified</div>
                        <div class="metric-change metric-change--positive">↗ Automated verification</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Candidate Self-Service Portal</h2>
                        <button class="btn btn--secondary" onclick="viewPortalDashboard()">
                            <i class="fas fa-external-link-alt"></i> View Portal Dashboard
                        </button>
                    </div>
                    
                    <div id="candidate-portal-features"></div>
                </div>
            </div>

            <!-- Business Intelligence Section -->
            <div id="intelligence-section" class="section hidden">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Comprehensive Business Intelligence</h2>
                        <button class="btn btn--secondary" onclick="exportIntelligenceReport()">
                            <i class="fas fa-file-export"></i> Export Intelligence Report
                        </button>
                    </div>
                    
                    <!-- Market Analysis Dashboard -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="card industry-insurance" style="margin-bottom: 0;">
                            <div class="card-header">
                                <h4 style="margin: 0;">🛡️ Insurance Market Intelligence</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 12px;">
                                <div class="stat">
                                    <div class="stat-value">2,500</div>
                                    <div class="stat-label">Total Companies</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">380</div>
                                    <div class="stat-label">Actively Hiring</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">65</div>
                                    <div class="stat-label">Avg Days to Hire</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">78%</div>
                                    <div class="stat-label">Skills Shortage</div>
                                </div>
                            </div>
                            <div style="font-size: 11px; color: var(--color-text-secondary);">
                                <strong>Key Focus:</strong> FCA compliance expertise, 45% increase in compliance roles
                            </div>
                        </div>
                        
                        <div class="card industry-coaching" style="margin-bottom: 0;">
                            <div class="card-header">
                                <h4 style="margin: 0;">🎓 Coaching Market Intelligence</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 12px;">
                                <div class="stat">
                                    <div class="stat-value">1,800</div>
                                    <div class="stat-label">Total Companies</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">210</div>
                                    <div class="stat-label">Actively Hiring</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">45</div>
                                    <div class="stat-label">Avg Days to Hire</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">89%</div>
                                    <div class="stat-label">ICF Demand</div>
                                </div>
                            </div>
                            <div style="font-size: 11px; color: var(--color-text-secondary);">
                                <strong>Key Trend:</strong> 28% market growth, executive coaching explosion
                            </div>
                        </div>
                        
                        <div class="card industry-builders" style="margin-bottom: 0;">
                            <div class="card-header">
                                <h4 style="margin: 0;">🏗️ Builders Merchant Intelligence</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 12px;">
                                <div class="stat">
                                    <div class="stat-value">3,200</div>
                                    <div class="stat-label">Total Companies</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">450</div>
                                    <div class="stat-label">Actively Hiring</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">40</div>
                                    <div class="stat-label">Avg Days to Hire</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">95%</div>
                                    <div class="stat-label">CSCS Required</div>
                                </div>
                            </div>
                            <div style="font-size: 11px; color: var(--color-text-secondary);">
                                <strong>Key Challenge:</strong> 82% skills shortage, rapid expansion post-COVID
                            </div>
                        </div>
                    </div>
                    
                    <!-- Company Intelligence Feed -->
                    <div id="intelligence-feed"></div>
                </div>
            </div>

            <!-- Candidate Intelligence Section -->
            <div id="candidates-section" class="section hidden">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Candidate Intelligence System</h2>
                        <button class="btn btn--primary" onclick="discoverCandidates()">
                            <i class="fas fa-search-plus"></i> Discover Candidates
                        </button>
                    </div>
                    
                    <!-- Candidate Discovery Pipeline -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-1);">
                            <div class="card-header">
                                <h4 style="margin: 0;">🔍 Active Candidate Discovery</h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;"><strong>1,250</strong> LinkedIn profiles analyzed</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>380</strong> contact details verified</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>95</strong> FCA-approved candidates identified</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="viewCandidatePool()">
                                <i class="fas fa-users"></i> View Candidate Pool
                            </button>
                        </div>
                        
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-3);">
                            <div class="card-header">
                                <h4 style="margin: 0;">🎓 Skills Assessment Engine</h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;">✓ LinkedIn skills verification</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Certification validation</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Career progression tracking</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="runSkillsAnalysis()">
                                <i class="fas fa-brain"></i> Analyze Skills
                            </button>
                        </div>
                        
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-5);">
                            <div class="card-header">
                                <h4 style="margin: 0;">💰 Salary Intelligence</h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;">Insurance: £35k - £120k</div>
                                <div style="font-size: 12px; margin: 4px 0;">Coaching: £40k - £95k</div>
                                <div style="font-size: 12px; margin: 4px 0;">Builders: £30k - £70k</div>
                            </div>
                            <button class="btn btn--primary btn--sm" onclick="benchmarkSalaries()">
                                <i class="fas fa-chart-line"></i> Salary Benchmarks
                            </button>
                        </div>
                    </div>
                    
                    <!-- Candidate Profiles -->
                    <div id="candidate-profiles"></div>
                </div>
            </div>

            <!-- Advanced Email Automation Section -->
            <div id="automation-section" class="section hidden">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">47,000</div>
                        <div class="metric-label">Emails Sent</div>
                        <div class="metric-change metric-change--positive">↗ +1,243 this month</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">38.2%</div>
                        <div class="metric-label">Open Rate</div>
                        <div class="metric-change metric-change--positive">↗ +3% vs industry</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">5.8%</div>
                        <div class="metric-label">Response Rate</div>
                        <div class="metric-change metric-change--positive">↗ Above benchmark</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Advanced Email Automation Engine</h2>
                        <button class="btn btn--primary" onclick="createEmailSequence()">
                            <i class="fas fa-plus"></i> Create Sequence
                        </button>
                    </div>
                    
                    <!-- Active Email Sequences -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="card industry-insurance" style="margin-bottom: 0;">
                            <div class="card-header">
                                <h4 style="margin: 0; display: flex; justify-content: space-between; align-items: center;">
                                    🛡️ Insurance Q4 Campaign
                                    <span class="status status--success">ACTIVE</span>
                                </h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;"><strong>150</strong> prospects enrolled</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>420</strong> emails sent</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>41.9%</strong> open rate</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>8</strong> demos booked</div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn--secondary btn--sm" onclick="viewSequence('insurance')">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="editSequence('insurance')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                        
                        <div class="card industry-coaching" style="margin-bottom: 0;">
                            <div class="card-header">
                                <h4 style="margin: 0; display: flex; justify-content: space-between; align-items: center;">
                                    🎓 Coaching Expansion
                                    <span class="status status--success">ACTIVE</span>
                                </h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;"><strong>80</strong> prospects enrolled</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>240</strong> emails sent</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>39.9%</strong> open rate</div>
                                <div style="font-size: 12px; margin: 4px 0;"><strong>5</strong> demos booked</div>
                            </div>
                            <div style="display: flex; gap: 8px;">
                                <button class="btn btn--secondary btn--sm" onclick="viewSequence('coaching')">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="editSequence('coaching')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Email Templates Library -->
                    <div id="email-templates"></div>
                    
                    <!-- A/B Test Results -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">A/B Test Performance</h3>
                        </div>
                        <div style="height: 250px; position: relative;">
                            <canvas id="abTestChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced CRM Section -->
            <div id="crm-section" class="section hidden">
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">487</div>
                        <div class="metric-label">Total Prospects</div>
                        <div class="metric-change metric-change--positive">↗ +23.5% growth</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">£150k</div>
                        <div class="metric-label">Pipeline Value</div>
                        <div class="metric-change metric-change--positive">↗ 32% faster cycle</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">94%</div>
                        <div class="metric-label">Client Retention</div>
                        <div class="metric-change metric-change--positive">↗ Industry leading</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Advanced CRM Pipeline Management</h2>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn btn--primary" onclick="addProspect()">
                                <i class="fas fa-plus"></i> Add Prospect
                            </button>
                            <button class="btn btn--secondary" onclick="importProspects()">
                                <i class="fas fa-upload"></i> Import
                            </button>
                            <button class="btn btn--secondary" onclick="exportPipeline()">
                                <i class="fas fa-download"></i> Export
                            </button>
                        </div>
                    </div>
                    
                    <!-- Pipeline Stages -->
                    <div class="pipeline" id="prospect-pipeline"></div>
                    
                    <!-- Pipeline Analytics -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Pipeline Conversion Funnel</h3>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="pipelineFunnelChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Deal Management -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Recent Deal Activity</h3>
                        </div>
                        <div id="deal-activity"></div>
                    </div>
                </div>
            </div>

            <!-- Automation Workflows Section -->
            <div id="workflows-section" class="section hidden">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Automation Workflows</h2>
                        <button class="btn btn--primary" onclick="createWorkflow()">
                            <i class="fas fa-plus"></i> Create Workflow
                        </button>
                    </div>
                    
                    <!-- Active Workflows -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="card" style="margin-bottom: 0; border: 2px solid var(--color-success);">
                            <div class="card-header">
                                <h4 style="margin: 0; display: flex; justify-content: space-between; align-items: center;">
                                    🤖 Automated Prospect Discovery
                                    <span class="status status--success">ACTIVE</span>
                                </h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;">✓ Google Maps search by location</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Companies House enrichment</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ LinkedIn contact discovery</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Email verification &amp; lead scoring</div>
                                <div style="margin-top: 8px; font-weight: 600;"><strong>500</strong> prospects/day | <strong>92%</strong> accuracy</div>
                            </div>
                            <button class="btn btn--secondary btn--sm" onclick="configureWorkflow('discovery')">
                                <i class="fas fa-cogs"></i> Configure
                            </button>
                        </div>
                        
                        <div class="card" style="margin-bottom: 0; border: 2px solid var(--color-success);">
                            <div class="card-header">
                                <h4 style="margin: 0; display: flex; justify-content: space-between; align-items: center;">
                                    📧 Multi-Channel Outreach
                                    <span class="status status--success">ACTIVE</span>
                                </h4>
                            </div>
                            <div style="margin-bottom: 12px;">
                                <div style="font-size: 12px; margin: 4px 0;">✓ Personalized email campaigns</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ AI-powered voice calling</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Response monitoring &amp; tracking</div>
                                <div style="font-size: 12px; margin: 4px 0;">✓ Automatic appointment booking</div>
                                <div style="margin-top: 8px; font-weight: 600;"><strong>8.4%</strong> conversion rate</div>
                            </div>
                            <button class="btn btn--secondary btn--sm" onclick="configureWorkflow('outreach')">
                                <i class="fas fa-cogs"></i> Configure
                            </button>
                        </div>
                    </div>
                    
                    <!-- Workflow Performance -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Workflow Performance Analytics</h3>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="workflowChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Advanced Analytics Section -->
            <div id="analytics-section" class="section hidden">
                <!-- Executive Summary Metrics -->
                <div class="metrics-grid" style="margin-bottom: 24px;">
                    <div class="metric-card">
                        <div class="metric-value">£420k</div>
                        <div class="metric-label">Total Revenue Generated</div>
                        <div class="metric-change metric-change--positive">↗ 28 deals closed</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">8.4%</div>
                        <div class="metric-label">Overall Conversion Rate</div>
                        <div class="metric-change metric-change--positive">↗ 67.8% engagement rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">£15.50</div>
                        <div class="metric-label">Cost Per Lead</div>
                        <div class="metric-change metric-change--positive">↗ 32% cycle reduction</div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Advanced Analytics Dashboard</h2>
                        <div style="display: flex; gap: 8px;">
                            <select class="form-control" id="analytics-industry" onchange="updateAnalytics()" style="width: 200px;">
                                <option value="all">All Industries</option>
                                <option value="insurance">Insurance</option>
                                <option value="coaching">Coaching</option>
                                <option value="builders_merchant">Builders Merchant</option>
                            </select>
                            <button class="btn btn--secondary" onclick="exportAnalyticsReport()">
                                <i class="fas fa-file-export"></i> Export Report
                            </button>
                        </div>
                    </div>
                    
                    <!-- Multi-Channel Performance -->
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-1);">
                            <div class="card-header">
                                <h4 style="margin: 0;">📧 Email Campaign Performance</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                <div class="stat">
                                    <div class="stat-value">38.2%</div>
                                    <div class="stat-label">Open Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">11.7%</div>
                                    <div class="stat-label">Click Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">5.8%</div>
                                    <div class="stat-label">Response Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">2.1%</div>
                                    <div class="stat-label">Meeting Rate</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-3);">
                            <div class="card-header">
                                <h4 style="margin: 0;">📞 Voice Calling Performance</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                <div class="stat">
                                    <div class="stat-value">19.5%</div>
                                    <div class="stat-label">Connect Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">12.3%</div>
                                    <div class="stat-label">Conversation Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">8.7%</div>
                                    <div class="stat-label">Appointment Rate</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">76.2%</div>
                                    <div class="stat-label">Show Rate</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card" style="margin-bottom: 0; background: var(--color-bg-5);">
                            <div class="card-header">
                                <h4 style="margin: 0;">🚀 Combined Approach ROI</h4>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
                                <div class="stat">
                                    <div class="stat-value">67.8%</div>
                                    <div class="stat-label">Prospect Engagement</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">15.2%</div>
                                    <div class="stat-label">Multi-Touch Conversion</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">32%</div>
                                    <div class="stat-label">Cycle Reduction</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">380</div>
                                    <div class="stat-label">Demos Booked</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Revenue Performance Chart -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Revenue Performance Trends</h3>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Industry Comparison Chart -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Industry Performance Comparison</h3>
                        </div>
                        <div style="height: 300px; position: relative;">
                            <canvas id="industryChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Real-time Activity Feed -->
                    <div class="card mt-16">
                        <div class="card-header">
                            <h3 class="card-title">Real-Time Activity Feed</h3>
                            <span class="status status--success">LIVE</span>
                        </div>
                        <div id="live-activity-feed"></div>
                    </div>
                </div>
            </div>
            
            <!-- Integration Guide Section -->
            <div id="integration-section" class="section hidden">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">🔌 Production Integration Guide</h2>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 24px;">
                        <h3 style="margin: 0 0 15px 0; font-size: 24px;">Transform This Demo Into Production</h3>
                        <p style="margin: 0; font-size: 16px; opacity: 0.9;">Follow this guide to implement real API integrations with proper security</p>
                    </div>
                    
                    <!-- Backend Architecture -->
                    <div class="card" style="margin-bottom: 24px;">
                        <h3 style="margin: 0 0 20px 0; color: var(--color-primary);">Step 1: Set Up Secure Backend Server</h3>
                        
                        <div style="background: #1e1e1e; color: #d4d4d4; padding: 20px; border-radius: 8px; font-family: monospace; font-size: 13px; margin-bottom: 20px; overflow-x: auto;">
                            <div style="color: #6a9955;">// Example: Node.js + Express Backend</div>
                            <div style="color: #569cd6;">const</div> express = <div style="color: #569cd6;">require</div>(<div style="color: #ce9178;">'express'</div>);
                            <div style="color: #569cd6;">const</div> cors = <div style="color: #569cd6;">require</div>(<div style="color: #ce9178;">'cors'</div>);
                            <div style="color: #569cd6;">require</div>(<div style="color: #ce9178;">'dotenv'</div>).config();
                            <br>
                            <div style="color: #569cd6;">const</div> app = express();
                            app.use(cors());
                            app.use(express.json());
                            <br>
                            <div style="color: #6a9955;">// Secure endpoint for email generation</div>
                            app.post(<div style="color: #ce9178;">'/api/generate-email'</div>, <div style="color: #569cd6;">async</div> (req, res) => {
                            &nbsp;&nbsp;<div style="color: #569cd6;">const</div> openai = <div style="color: #569cd6;">new</div> OpenAI({
                            &nbsp;&nbsp;&nbsp;&nbsp;apiKey: process.env.OPENAI_API_KEY <div style="color: #6a9955;">// Stored securely</div>
                            &nbsp;&nbsp;});
                            &nbsp;&nbsp;<div style="color: #6a9955;">// Your secure API logic here</div>
                            });
                        </div>
                        
                        <div style="background: var(--color-bg-1); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                            <strong>🔑 Environment Variables (.env file):</strong>
                            <pre style="margin: 10px 0 0 0; font-family: monospace; font-size: 12px; color: #333;">OPENAI_API_KEY=your_key_here
COMPANIES_HOUSE_KEY=your_key_here
GOOGLE_MAPS_KEY=your_key_here
RESEND_API_KEY=your_key_here</pre>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                            <div style="background: var(--color-bg-3); padding: 15px; border-radius: 8px;">
                                <strong>✅ Do This:</strong>
                                <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 13px;">
                                    <li>Store keys in .env file</li>
                                    <li>Use process.env variables</li>
                                    <li>Add .env to .gitignore</li>
                                    <li>Use backend API endpoints</li>
                                </ul>
                            </div>
                            <div style="background: var(--color-bg-4); padding: 15px; border-radius: 8px;">
                                <strong>❌ Don't Do This:</strong>
                                <ul style="margin: 10px 0 0 0; padding-left: 20px; font-size: 13px;">
                                    <li>Expose keys in frontend code</li>
                                    <li>Commit keys to git</li>
                                    <li>Share keys in plain text</li>
                                    <li>Make direct API calls from browser</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- API Implementation Examples -->
                    <div class="card" style="margin-bottom: 24px;">
                        <h3 style="margin: 0 0 20px 0; color: var(--color-primary);">Step 2: Implement API Endpoints</h3>
                        
                        <div style="display: grid; grid-template-columns: 1fr; gap: 20px;">
                            <!-- OpenAI Implementation -->
                            <div style="border-left: 4px solid #10B981; padding-left: 15px;">
                                <h4 style="margin: 0 0 10px 0;">🧠 OpenAI Email Generation</h4>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 13px; margin-bottom: 10px;">
                                    <strong>Endpoint:</strong> POST /api/generate-email<br>
                                    <strong>Purpose:</strong> Generate personalized emails with GPT-4<br>
                                    <strong>Cost:</strong> ~$0.03 per email (GPT-4)<br>
                                    <strong>Rate Limit:</strong> 3,500 requests/min
                                </div>
                                <details style="cursor: pointer;">
                                    <summary style="font-weight: 500; padding: 10px; background: var(--color-bg-1); border-radius: 6px;">View Implementation Code</summary>
                                    <div style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; margin-top: 10px; overflow-x: auto;">
                                        <div>app.post('/api/generate-email', async (req, res) => {</div>
                                        <div>&nbsp;&nbsp;const { company, industry, contactName } = req.body;</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const completion = await openai.chat.completions.create({</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;model: "gpt-4",</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;messages: [{</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;role: "user",</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;content: `Generate personalized email for ${company}...`</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;}]</div>
                                        <div>&nbsp;&nbsp;});</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;res.json({ email: completion.choices[0].message.content });</div>
                                        <div>});</div>
                                    </div>
                                </details>
                            </div>
                            
                            <!-- Companies House Implementation -->
                            <div style="border-left: 4px solid #3B82F6; padding-left: 15px;">
                                <h4 style="margin: 0 0 10px 0;">🏢 Companies House Data Enrichment</h4>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 13px; margin-bottom: 10px;">
                                    <strong>Endpoint:</strong> GET /api/company/:companyNumber<br>
                                    <strong>Purpose:</strong> Get UK company info, directors, financials<br>
                                    <strong>Cost:</strong> Free<br>
                                    <strong>Rate Limit:</strong> 600 requests per 5 minutes
                                </div>
                                <details style="cursor: pointer;">
                                    <summary style="font-weight: 500; padding: 10px; background: var(--color-bg-1); border-radius: 6px;">View Implementation Code</summary>
                                    <div style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; margin-top: 10px; overflow-x: auto;">
                                        <div>app.get('/api/company/:number', async (req, res) => {</div>
                                        <div>&nbsp;&nbsp;const response = await fetch(</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;`https://api.company-information.service.gov.uk/company/${req.params.number}`,</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;{</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers: {</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Authorization': process.env.COMPANIES_HOUSE_KEY</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;}</div>
                                        <div>&nbsp;&nbsp;);</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const data = await response.json();</div>
                                        <div>&nbsp;&nbsp;res.json(data);</div>
                                        <div>});</div>
                                    </div>
                                </details>
                            </div>
                            
                            <!-- Google Maps Implementation -->
                            <div style="border-left: 4px solid #F59E0B; padding-left: 15px;">
                                <h4 style="margin: 0 0 10px 0;">🗺️ Google Maps Business Search</h4>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 13px; margin-bottom: 10px;">
                                    <strong>Endpoint:</strong> POST /api/search-businesses<br>
                                    <strong>Purpose:</strong> Find businesses by location and industry<br>
                                    <strong>Cost:</strong> $17 per 1,000 searches<br>
                                    <strong>Rate Limit:</strong> Set your own limits
                                </div>
                                <details style="cursor: pointer;">
                                    <summary style="font-weight: 500; padding: 10px; background: var(--color-bg-1); border-radius: 6px;">View Implementation Code</summary>
                                    <div style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; margin-top: 10px; overflow-x: auto;">
                                        <div>app.post('/api/search-businesses', async (req, res) => {</div>
                                        <div>&nbsp;&nbsp;const { query, location } = req.body;</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const response = await fetch(</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;`https://maps.googleapis.com/maps/api/place/textsearch/json?` +</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;`query=${query}&location=${location}&key=${process.env.GOOGLE_MAPS_KEY}`</div>
                                        <div>&nbsp;&nbsp;);</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const data = await response.json();</div>
                                        <div>&nbsp;&nbsp;res.json(data.results);</div>
                                        <div>});</div>
                                    </div>
                                </details>
                            </div>
                            
                            <!-- Resend Implementation -->
                            <div style="border-left: 4px solid #8B5CF6; padding-left: 15px;">
                                <h4 style="margin: 0 0 10px 0;">📧 Resend Email Delivery</h4>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 6px; font-size: 13px; margin-bottom: 10px;">
                                    <strong>Endpoint:</strong> POST /api/send-email<br>
                                    <strong>Purpose:</strong> Send tracked emails with analytics<br>
                                    <strong>Cost:</strong> Free (3k/month), then $20/month<br>
                                    <strong>Features:</strong> Open tracking, click tracking, bounces
                                </div>
                                <details style="cursor: pointer;">
                                    <summary style="font-weight: 500; padding: 10px; background: var(--color-bg-1); border-radius: 6px;">View Implementation Code</summary>
                                    <div style="background: #1e1e1e; color: #d4d4d4; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; margin-top: 10px; overflow-x: auto;">
                                        <div>app.post('/api/send-email', async (req, res) => {</div>
                                        <div>&nbsp;&nbsp;const { to, subject, html } = req.body;</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const response = await fetch('https://api.resend.com/emails', {</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;method: 'POST',</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;headers: {</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Authorization': `Bearer ${process.env.RESEND_API_KEY}`,</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Content-Type': 'application/json'</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;},</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify({</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from: 'ben@talentedge.ai',</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to, subject, html</div>
                                        <div>&nbsp;&nbsp;&nbsp;&nbsp;})</div>
                                        <div>&nbsp;&nbsp;});</div>
                                        <div>&nbsp;&nbsp;</div>
                                        <div>&nbsp;&nbsp;const data = await response.json();</div>
                                        <div>&nbsp;&nbsp;res.json(data);</div>
                                        <div>});</div>
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Deployment Guide -->
                    <div class="card" style="margin-bottom: 24px;">
                        <h3 style="margin: 0 0 20px 0; color: var(--color-primary);">Step 3: Deploy to Production</h3>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 15px;">
                            <div style="background: var(--color-bg-1); padding: 20px; border-radius: 8px;">
                                <h4 style="margin: 0 0 10px 0;">Hosting Options</h4>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px; line-height: 1.8;">
                                    <li><strong>Vercel:</strong> Easy deployment for Next.js</li>
                                    <li><strong>Heroku:</strong> Full-stack Node.js apps</li>
                                    <li><strong>AWS:</strong> Enterprise-scale solutions</li>
                                    <li><strong>Railway:</strong> Simple Node.js hosting</li>
                                </ul>
                            </div>
                            
                            <div style="background: var(--color-bg-3); padding: 20px; border-radius: 8px;">
                                <h4 style="margin: 0 0 10px 0;">Security Checklist</h4>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px; line-height: 1.8;">
                                    <li>Enable HTTPS/SSL certificates</li>
                                    <li>Set up CORS properly</li>
                                    <li>Add rate limiting</li>
                                    <li>Implement authentication</li>
                                </ul>
                            </div>
                            
                            <div style="background: var(--color-bg-5); padding: 20px; border-radius: 8px;">
                                <h4 style="margin: 0 0 10px 0;">Monitoring &amp; Logs</h4>
                                <ul style="margin: 0; padding-left: 20px; font-size: 13px; line-height: 1.8;">
                                    <li>Set up error tracking (Sentry)</li>
                                    <li>Monitor API usage/costs</li>
                                    <li>Log all API calls</li>
                                    <li>Set up alerts for failures</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cost Calculator -->
                    <div class="card">
                        <h3 style="margin: 0 0 20px 0; color: var(--color-primary);">💰 Monthly Cost Calculator</h3>
                        
                        <div style="background: var(--color-bg-2); padding: 20px; border-radius: 8px;">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                                <div>
                                    <strong>OpenAI (GPT-4):</strong><br>
                                    <span style="font-size: 24px; color: var(--color-primary);">$90</span>
                                    <div style="font-size: 12px; color: #666; margin-top: 4px;">3,000 emails @ $0.03 each</div>
                                </div>
                                <div>
                                    <strong>Google Maps API:</strong><br>
                                    <span style="font-size: 24px; color: var(--color-primary);">$85</span>
                                    <div style="font-size: 12px; color: #666; margin-top: 4px;">5,000 searches @ $17/1k</div>
                                </div>
                                <div>
                                    <strong>Resend Email:</strong><br>
                                    <span style="font-size: 24px; color: var(--color-primary);">$20</span>
                                    <div style="font-size: 12px; color: #666; margin-top: 4px;">Up to 50k emails/month</div>
                                </div>
                                <div>
                                    <strong>Companies House:</strong><br>
                                    <span style="font-size: 24px; color: var(--color-success);">FREE</span>
                                    <div style="font-size: 12px; color: #666; margin-top: 4px;">Unlimited (rate limited)</div>
                                </div>
                            </div>
                            
                            <div style="border-top: 2px solid #ddd; padding-top: 15px; text-align: center;">
                                <strong style="font-size: 18px;">Total Monthly Cost:</strong>
                                <div style="font-size: 36px; font-weight: bold; color: var(--color-primary); margin: 10px 0;">~$195</div>
                                <div style="font-size: 13px; color: #666;">Based on moderate usage. Scales with volume.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Dashboard Section -->
            <div id="dashboard-section" class="section hidden">
                <div class="metrics-grid" id="dashboard-metrics"></div>
                
                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Actions</h3>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <button class="btn btn--primary" onclick="quickJobSearch()">
                            <i class="fas fa-search"></i> Quick Job Search
                        </button>
                        <button class="btn btn--primary" onclick="bulkEmailCampaign()">
                            <i class="fas fa-envelope-bulk"></i> Bulk Campaign
                        </button>
                        <button class="btn btn--secondary" onclick="exportProspects()">
                            <i class="fas fa-download"></i> Export Prospects
                        </button>
                        <button class="btn btn--secondary" onclick="importContacts()">
                            <i class="fas fa-upload"></i> Import Contacts
                        </button>
                    </div>
                </div>
                
                <!-- Industry Performance -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Industry Performance Overview</h3>
                    </div>
                    <div id="industry-performance"></div>
                </div>
                
                <!-- Pipeline Overview Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Pipeline Conversion Funnel</h3>
                    </div>
                    <div style="height: 400px; position: relative;">
                        <canvas id="pipelineChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ⚠️ SECURITY WARNING: This is a CLIENT-SIDE DEMO
        // In production, ALL API calls must go through a secure backend server
        // NEVER expose API keys in client-side code
        
        // API Configuration (normally stored securely on backend)
        const API_CONFIG = {
            openai: { configured: false, endpoint: 'https://api.openai.com/v1' },
            companies_house: { configured: false, endpoint: 'https://api.company-information.service.gov.uk' },
            google_maps: { configured: false, endpoint: 'https://maps.googleapis.com/maps/api' },
            resend: { configured: false, endpoint: 'https://api.resend.com' }
        };
        
        // Ultimate TalentEdge AI Platform Data - Enterprise Dataset
        const appData = {
            // Live scraping metrics
            scrapingMetrics: {
                prospects_discovered_today: 2450,
                companies_enriched_today: 1820,
                active_scrapers: 3,
                accuracy_rate: 92,
                google_maps_results: {
                    insurance_london: 450,
                    coaching_manchester: 280,
                    builders_birmingham: 320
                },
            
            // Advanced workflow automation
            automationWorkflows: {
                discovery_workflow: {
                    name: "Automated Prospect Discovery",
                    status: "active",
                    daily_volume: 500,
                    accuracy_rate: 92,
                    steps: [
                        "Google Maps search by location/industry",
                        "Companies House data enrichment",
                        "LinkedIn contact identification",
                        "Email verification & lead scoring"
                    ]
                },
                outreach_workflow: {
                    name: "Multi-Channel Outreach",
                    status: "active",
                    conversion_rate: 8.4,
                    steps: [
                        "Personalized email generation",
                        "AI voice calling sequence",
                        "Response monitoring & tracking",
                        "Automatic appointment booking"
                    ]
                }
            },
            
            // Live activity feed
            liveActivityFeed: [
                {
                    timestamp: Date.now() - 30000,
                    type: "voice_call_connected",
                    description: "AI voice agent connected with Sarah Johnson at Marsh McLennan",
                    outcome: "Demo scheduled for Friday 2pm"
                },
                {
                    timestamp: Date.now() - 120000,
                    type: "email_opened",
                    description: "Emma Williams at Vistage UK opened follow-up email",
                    outcome: "High engagement score"
                },
                {
                    timestamp: Date.now() - 180000,
                    type: "prospect_discovered",
                    description: "LinkedIn scraper identified 12 new FCA-approved candidates",
                    outcome: "Added to candidate pool"
                }
            ],
                companies_house_enriched: 18500,
                linkedin_profiles_analyzed: 25000
            },
            
            // Voice calling system data
            voiceCalling: {
                total_calls_made: 12000,
                active_campaigns: [
                    {
                        campaign_id: "INS_VOICE_Q4",
                        name: "Insurance FCA Compliance",
                        industry: "insurance",
                        prospects_enrolled: 250,
                        calls_made: 250,
                        connect_rate: 18,
                        appointment_rate: 12,
                        status: "active",
                        voice_settings: {
                            voice_type: "British Female",
                            speaking_rate: 0.9,
                            pitch: 0.1
                        },
                        script_preview: "Hi {{contact_name}}, this is Ben from TalentEdge AI. I noticed {{company}} has been expanding rapidly..."
                    },
                    {
                        campaign_id: "COACH_VOICE_EXP",
                        name: "Executive Coaching Talent",
                        industry: "coaching",
                        prospects_enrolled: 180,
                        calls_made: 180,
                        connect_rate: 22,
                        appointment_rate: 16,
                        status: "active",
                        voice_settings: {
                            voice_type: "British Male",
                            speaking_rate: 0.85,
                            pitch: -0.1
                        },
                        script_preview: "Hi {{contact_name}}, this is Ben from TalentEdge AI. I've been following {{company}}'s growth story..."
                    }
                ],
                twilio_numbers: [
                    { number: "+44 20 3519 5678", type: "UK Local", status: "active" },
                    { number: "+44 161 123 4567", type: "UK Local", status: "active" }
                ]
            },
            
            // Comprehensive business intelligence
            businessIntelligence: {
                market_analysis: {
                    insurance: {
                        total_companies: 2500,
                        active_hiring: 380,
                        avg_time_to_hire: 65,
                        skills_shortage: 78,
                        growth_rate: 12,
                        key_trends: "45% increase in FCA compliance roles"
                    },
                    coaching: {
                        total_companies: 1800,
                        active_hiring: 210,
                        avg_time_to_hire: 45,
                        skills_shortage: 65,
                        growth_rate: 28,
                        key_trends: "Executive coaching explosion post-COVID"
                    },
                    builders_merchant: {
                        total_companies: 3200,
                        active_hiring: 450,
                        avg_time_to_hire: 40,
                        skills_shortage: 82,
                        growth_rate: 8,
                        key_trends: "Rapid expansion, 82% skills shortage"
                    }
                },
                enriched_companies: [
                    {
                        company: "Marsh McLennan",
                        industry: "insurance",
                        revenue: "£15B+",
                        employees: "5000+",
                        tech_stack: ["Salesforce", "Workday", "Microsoft 365"],
                        recent_news: "Acquired specialty consulting firm in Q3",
                        hiring_trends: "35% increase in compliance roles",
                        decision_makers: 3,
                        pain_points: ["FCA compliance", "Talent shortage", "Remote hiring"]
                    }
                ]
            },
            
            // GitHub talent intelligence
            githubTalentIntelligence: {
                developer_profiles: [
                    {
                        username: "sarah-dev-lead",
                        name: "Sarah Johnson",
                        location: "London, UK",
                        languages: ["Python", "JavaScript", "Go", "TypeScript"],
                        specialization: "Full-Stack Development",
                        experience_level: "Senior",
                        repositories: 47,
                        contributions_last_year: 1250,
                        followers: 230,
                        following: 180,
                        top_projects: ["fintech-api", "ml-trading-bot", "react-dashboard"],
                        collaboration_score: 85,
                        influence_rating: 78,
                        code_quality_score: 92,
                        github_profile: "https://github.com/sarah-dev-lead",
                        email: "sarah.johnson@techmail.com",
                        available: true,
                        salary_expectation: "£75k-£95k"
                    },
                    {
                        username: "mike-insurance-tech",
                        name: "Michael Chen",
                        location: "Manchester, UK",
                        languages: ["Java", "C#", ".NET", "SQL"],
                        specialization: "Insurance Technology",
                        experience_level: "Senior",
                        repositories: 32,
                        contributions_last_year: 890,
                        followers: 150,
                        following: 200,
                        top_projects: ["policy-management", "claims-processor", "risk-calculator"],
                        collaboration_score: 92,
                        influence_rating: 71,
                        code_quality_score: 88,
                        github_profile: "https://github.com/mike-insurance-tech",
                        email: "m.chen@devmail.com",
                        available: false,
                        salary_expectation: "£70k-£90k"
                    },
                    {
                        username: "emma-react-expert",
                        name: "Emma Williams",
                        location: "Bristol, UK",
                        languages: ["JavaScript", "TypeScript", "React", "Node.js"],
                        specialization: "Frontend Development",
                        experience_level: "Mid-Level",
                        repositories: 38,
                        contributions_last_year: 980,
                        followers: 185,
                        following: 165,
                        top_projects: ["component-library", "state-manager", "ui-toolkit"],
                        collaboration_score: 79,
                        influence_rating: 68,
                        code_quality_score: 86,
                        github_profile: "https://github.com/emma-react-expert",
                        email: "emma.w@frontend.dev",
                        available: true,
                        salary_expectation: "£55k-£70k"
                    }
                ],
                search_metrics: {
                    profiles_analyzed: 1250,
                    qualified_candidates: 187,
                    senior_developers: 89,
                    available_now: 65
                }
            },
            
            // Candidate portal features
            candidatePortal: {
                registered_candidates: 342,
                active_applications: 128,
                completed_assessments: 215,
                certifications_verified: 156,
                training_modules: [
                    { name: "FCA Compliance Essentials", enrolled: 45, completed: 32 },
                    { name: "ICF Coaching Fundamentals", enrolled: 38, completed: 28 },
                    { name: "CSCS Health & Safety", enrolled: 52, completed: 47 }
                ]
            },
            
            // Candidate intelligence system
            candidateIntelligence: {
                active_discovery: {
                    linkedin_profiles_analyzed: 1250,
                    contact_details_verified: 380,
                    fca_approved_identified: 95,
                    icf_certified_found: 67,
                    cscs_card_holders: 120
                },
                candidate_pool: [
                    {
                        candidate_id: "CAND_001",
                        name: "Sarah Johnson",
                        title: "Senior Underwriter",
                        current_company: "Aviva",
                        experience_years: 8,
                        certifications: ["FCA Approved", "CII Diploma"],
                        skills_score: 92,
                        availability: "Open to opportunities",
                        salary_expectation: "£65k-£80k",
                        location: "London",
                        verified_contact: true
                    }
                ]
            },
            jobs: {
                insurance: [
                    {
                        job_id: "ins_001",
                        title: "Senior Commercial Insurance Broker",
                        company: "Marsh McLennan",
                        location: "London",
                        salary_min: 65000,
                        salary_max: 85000,
                        salary: "£65,000 - £85,000",
                        posted_date: "2025-10-21",
                        posted_ago: "2 days ago",
                        job_board: "LinkedIn Jobs",
                        company_size: "10000+",
                        industry: "insurance",
                        description: "Leading commercial insurance broker required for our London office. FCA approved person status essential.",
                        requirements: ["FCA Approved", "Commercial Lines", "5+ years experience"],
                        company_website: "marsh.com",
                        hiring_manager: "Sarah Johnson",
                        hr_contact: "sarah.johnson@marsh.com",
                        company_revenue: "£15B+"
                    },
                    {
                        job_id: "ins_002",
                        title: "Insurance Underwriter",
                        company: "Aviva",
                        location: "Norwich",
                        salary_min: 45000,
                        salary_max: 60000,
                        salary: "£45,000 - £60,000",
                        posted_date: "2025-10-18",
                        posted_ago: "5 days ago",
                        job_board: "Indeed",
                        company_size: "5000-10000",
                        industry: "insurance",
                        description: "Experienced underwriter required for our general insurance division.",
                        requirements: ["CII Qualified", "Underwriting", "3+ years experience"],
                        company_website: "aviva.com",
                        hiring_manager: "Michael Chen",
                        hr_contact: "michael.chen@aviva.com",
                        company_revenue: "£45B+"
                    }
                ],
                coaching: [
                    {
                        job_id: "coach_001",
                        title: "Executive Coach",
                        company: "Vistage UK",
                        location: "Remote",
                        salary_min: 60000,
                        salary_max: 90000,
                        salary: "£60,000 - £90,000",
                        posted_date: "2025-10-20",
                        posted_ago: "3 days ago",
                        job_board: "LinkedIn Jobs",
                        company_size: "100-500",
                        industry: "coaching",
                        description: "ICF certified executive coach to work with our CEOs and senior executives.",
                        requirements: ["ICF PCC/MCC", "Executive Coaching", "Corporate Experience"],
                        company_website: "vistage.co.uk",
                        hiring_manager: "Emma Williams",
                        hr_contact: "emma.williams@vistage.co.uk",
                        company_revenue: "£50M+"
                    }
                ],
                builders_merchant: [
                    {
                        job_id: "build_001",
                        title: "Branch Manager",
                        company: "Travis Perkins",
                        location: "Birmingham",
                        salary_min: 45000,
                        salary_max: 65000,
                        salary: "£45,000 - £65,000",
                        posted_date: "2025-10-19",
                        posted_ago: "4 days ago",
                        job_board: "Reed",
                        company_size: "5000-10000",
                        industry: "builders_merchant",
                        description: "Experienced branch manager required for our Birmingham flagship store.",
                        requirements: ["P&L Management", "CSCS Card", "Retail Management"],
                        company_website: "travisperkins.co.uk",
                        hiring_manager: "David Brown",
                        hr_contact: "david.brown@travisperkins.co.uk",
                        company_revenue: "£6B+"
                    }
                ]
            },
            emailTemplates: {
                insurance: {
                    cold_outreach: {
                        subject: "Your FCA compliance expertise caught my attention",
                        body: "Hi {{contact_name}},\n\nI noticed {{company}}'s work in {{industry_focus}}. With the FCA's latest conduct risk guidelines putting pressure on compliance, talent acquisition is more challenging than ever.\n\nWe've built an AI portal that gives insurance companies complete visibility of every FCA-approved candidate in their region. Our clients are cutting time-to-hire by 40% while maintaining 100% compliance standards.\n\nWorth a 15-minute conversation this week?\n\nBest regards,\nBen Palmer\nTalentEdge AI\n07707 643953"
                    },
                    follow_up_1: {
                        subject: "Insurance recruitment costs up 23% in Q4",
                        body: "Hi {{contact_name}},\n\nJust saw the latest Insurance Times report - recruitment costs are up 23% this quarter, largely due to the talent shortage in compliance roles.\n\nThe most interesting finding: 68% of insurance firms are missing qualified candidates already in their local area simply because they don't have visibility.\n\nThought this might be relevant to your team planning.\n\nBest,\nBen Palmer\nTalentEdge AI"
                    }
                },
                coaching: {
                    cold_outreach: {
                        subject: "ICF certified coaches - finding quality talent",
                        body: "Hi {{contact_name}},\n\nI saw {{company}}'s coaching work and client testimonials - impressive transformation stories.\n\nThe corporate coaching market has exploded post-COVID. L&D departments have serious budgets and are desperately seeking quality coaches.\n\nWe help companies like {{company}} find ICF/EMCC certified coaches 60% faster using AI verification.\n\nQuick chat this week?\n\nBest,\nBen Palmer\nTalentEdge AI"
                    }
                },
                builders_merchant: {
                    cold_outreach: {
                        subject: "Branch managers with P&L experience - unicorns",
                        body: "Hi {{contact_name}},\n\n{{years_at_company}} years at {{company}} - that's serious loyalty in an industry where people jump ship constantly.\n\nRegional builders merchant (part of a £500M group) is opening 3 new branches in {{location}} area. They need an experienced Branch Manager to run their flagship site - 15,000 sq ft, 40 staff, £8M annual turnover.\n\n£65k base + 15% bonus + car + equity stake. Plus, you'd help recruit and train the other 2 branch managers.\n\nKnow you've got a good thing at {{company}}, but this could be the step up you've been waiting for.\n\nWorth a conversation?\n\nBest,\nBen Palmer\nTalentEdge AI"
                    }
                }
            },
            prospects: [
                {
                    prospect_id: "PROS_001",
                    name: "Sarah Johnson",
                    company: "Marsh McLennan",
                    title: "HR Director",
                    email: "sarah.johnson@marsh.com",
                    phone: "+44 20 7357 1000",
                    industry: "insurance",
                    company_size: "10000+",
                    location: "London",
                    stage: "contacted",
                    lastContact: "2025-10-22",
                    notes: "Interested in seeing demo. Mentioned struggling with FCA compliance hiring.",
                    email_opens: 2,
                    email_clicks: 1,
                    response_sentiment: "Positive"
                },
                {
                    prospect_id: "PROS_002",
                    name: "Emma Williams",
                    company: "Vistage UK",
                    title: "Talent Manager",
                    email: "emma.williams@vistage.co.uk",
                    phone: "+44 161 123 4567",
                    industry: "coaching",
                    company_size: "100-500",
                    location: "Manchester",
                    stage: "demo",
                    lastContact: "2025-10-21",
                    notes: "Demo scheduled for Oct 25. Very interested in ICF verification features.",
                    email_opens: 3,
                    email_clicks: 2,
                    response_sentiment: "Very Positive"
                },
                { name: "Michael Chen", company: "Aviva", stage: "new", industry: "insurance", email: "michael.chen@aviva.com", lastContact: "2025-10-20", title: "Underwriting Manager" },
                { name: "David Brown", company: "Travis Perkins", stage: "responded", industry: "builders_merchant", email: "david.brown@travisperkins.co.uk", lastContact: "2025-10-19", title: "Regional HR Manager" },
                { name: "James Wilson", company: "Direct Line Group", stage: "pilot", industry: "insurance", email: "james.wilson@directline.com", lastContact: "2025-10-18", title: "Head of Talent" },
                { name: "Rachel Green", company: "ActionCOACH", stage: "client", industry: "coaching", email: "rachel.green@actioncoach.com", lastContact: "2025-10-15", title: "Business Development Director" }
            ],
            campaigns: {
                insurance_q4_2025: {
                    campaign_name: "Insurance Q4 Cold Outreach",
                    industry: "insurance",
                    start_date: "2025-10-01",
                    status: "Active",
                    prospects_enrolled: 150,
                    emails_sent: 420,
                    emails_delivered: 415,
                    emails_opened: 174,
                    emails_clicked: 42,
                    responses_received: 28,
                    positive_responses: 18,
                    demos_booked: 8,
                    open_rate: 41.9,
                    click_rate: 10.1,
                    response_rate: 6.7
                },
                coaching_expansion: {
                    campaign_name: "Coaching Market Expansion",
                    industry: "coaching",
                    start_date: "2025-09-15",
                    status: "Active",
                    prospects_enrolled: 80,
                    emails_sent: 240,
                    emails_delivered: 238,
                    emails_opened: 95,
                    emails_clicked: 23,
                    responses_received: 15,
                    positive_responses: 11,
                    demos_booked: 5,
                    open_rate: 39.9,
                    click_rate: 9.7,
                    response_rate: 6.3
                }
            },
            industryBenchmarks: {
                insurance: {
                    avg_time_to_hire: 65,
                    avg_cost_per_hire: 8500,
                    typical_salary_range: "£35,000 - £120,000",
                    key_certifications: ["FCA Approved Person", "CII Diploma", "PI Insurance"],
                    talent_shortage_score: 78
                },
                coaching: {
                    avg_time_to_hire: 45,
                    avg_cost_per_hire: 6200,
                    typical_salary_range: "£40,000 - £95,000",
                    key_certifications: ["ICF ACC/PCC/MCC", "EMCC Practitioner", "AC Qualified"],
                    talent_shortage_score: 65
                },
                builders_merchant: {
                    avg_time_to_hire: 40,
                    avg_cost_per_hire: 5800,
                    typical_salary_range: "£30,000 - £70,000",
                    key_certifications: ["CSCS Card", "Forklift License", "H&S Qualification"],
                    talent_shortage_score: 82
                }
            },
            dashboardMetrics: {
                total_prospects: 487,
                active_campaigns: 3,
                emails_sent_this_month: 1243,
                response_rate: 8.4,
                demos_booked: 12,
                pipeline_value: 150000,
                monthly_growth: 23.5,
                client_retention: 94
            },
            recentActivities: [
                {
                    activity_id: "ACT_001",
                    type: "email_sent",
                    prospect: "Sarah Johnson",
                    company: "Marsh McLennan",
                    timestamp: "2025-10-23T09:15:00Z",
                    details: "Cold outreach email sent - FCA compliance focus"
                },
                {
                    activity_id: "ACT_002",
                    type: "email_opened",
                    prospect: "Emma Williams",
                    company: "Vistage UK",
                    timestamp: "2025-10-23T08:45:00Z",
                    details: "Opened demo follow-up email"
                },
                {
                    activity_id: "ACT_003",
                    type: "demo_booked",
                    prospect: "David Brown",
                    company: "Travis Perkins",
                    timestamp: "2025-10-23T07:30:00Z",
                    details: "Demo scheduled for Oct 26, 2pm"
                }
            ],
            analytics: {
                insurance: {
                    emails_sent: 450,
                    open_rate: 42,
                    click_rate: 15,
                    response_rate: 8,
                    demos_booked: 12
                },
                coaching: {
                    emails_sent: 280,
                    open_rate: 38,
                    click_rate: 12,
                    response_rate: 6,
                    demos_booked: 7
                },
                builders_merchant: {
                    emails_sent: 320,
                    open_rate: 35,
                    click_rate: 10,
                    response_rate: 5,
                    demos_booked: 8
                }
            }
        };

        // Email tracking system
        const emailTracking = {
            sentEmails: new Map(),
            trackEmail: function(prospectId, templateType, timestamp = Date.now()) {
                const emailId = `email_${timestamp}_${Math.random().toString(36).substr(2, 9)}`;
                this.sentEmails.set(emailId, {
                    prospectId,
                    templateType,
                    sentAt: timestamp,
                    opened: false,
                    clicked: false,
                    responded: false
                });
                return emailId;
            },
            markOpened: function(emailId) {
                if (this.sentEmails.has(emailId)) {
                    this.sentEmails.get(emailId).opened = true;
                    this.sentEmails.get(emailId).openedAt = Date.now();
                }
            },
            markClicked: function(emailId) {
                if (this.sentEmails.has(emailId)) {
                    this.sentEmails.get(emailId).clicked = true;
                    this.sentEmails.get(emailId).clickedAt = Date.now();
                }
            },
            getStats: function() {
                const emails = Array.from(this.sentEmails.values());
                return {
                    total: emails.length,
                    opened: emails.filter(e => e.opened).length,
                    clicked: emails.filter(e => e.clicked).length,
                    responded: emails.filter(e => e.responded).length
                };
            }
        };

        // Current filters
        let currentFilters = {
            industry: 'all',
            location: 'all'
        };

        // Initialize the ultimate platform
        function initApp() {
            setupNavigation();
            
            // Initialize all sections
            renderScrapingEngine();
            renderVoiceCallingSystem();
            renderGitHubTalentIntelligence();
            renderCandidatePortal();
            renderBusinessIntelligence();
            renderCandidateIntelligence();
            renderEmailAutomation();
            renderAdvancedCRM();
            renderAutomationWorkflows();
            renderAdvancedAnalytics();
            renderDashboardMetrics();
            renderIndustryPerformance();
            renderLiveActivityFeed();
            
            // Start real-time updates
            startRealTimeUpdates();
            
            // Load Chart.js for advanced analytics
            if (typeof Chart === 'undefined') {
                loadChartJS();
            }
        }
        
        // Start real-time updates for live dashboard
        function startRealTimeUpdates() {
            setInterval(function() {
                updateLiveMetrics();
                renderLiveActivityFeed();
            }, 15000); // Update every 15 seconds
        }
        
        // Update live metrics
        function updateLiveMetrics() {
            // Simulate real-time data updates
            appData.scrapingMetrics.prospects_discovered_today += Math.floor(Math.random() * 10);
            appData.voiceCalling.total_calls_made += Math.floor(Math.random() * 5);
            
            // Add new activity
            const activities = [
                "New prospect discovered via LinkedIn scraping",
                "Voice AI successfully booked demo appointment",
                "Email sequence generated positive response",
                "Companies House data enrichment completed"
            ];
            
            const newActivity = {
                timestamp: Date.now(),
                type: ["prospect_discovered", "voice_call_success", "email_response", "data_enriched"][Math.floor(Math.random() * 4)],
                description: activities[Math.floor(Math.random() * activities.length)],
                outcome: "Updated in CRM pipeline"
            };
            
            appData.liveActivityFeed.unshift(newActivity);
            if (appData.liveActivityFeed.length > 50) {
                appData.liveActivityFeed.pop();
            }
        }
        
        // Load Chart.js library for advanced analytics
        function loadChartJS() {
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/chart.js';
            script.onload = function() {
                renderPerformanceChart();
                renderPipelineChart();
                renderCallPerformanceChart();
                renderABTestChart();
                renderRevenueChart();
                renderIndustryChart();
                renderWorkflowChart();
                renderPipelineFunnelChart();
                renderIndustryChart();
            };
            document.head.appendChild(script);
        }
        
        // Render call performance chart
        function renderCallPerformanceChart() {
            const ctx = document.getElementById('callPerformanceChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (window.callPerformanceChartInstance) {
                window.callPerformanceChartInstance.destroy();
            }
            
            const data = {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                datasets: [{
                    label: 'Calls Made',
                    data: [450, 680, 820, 950],
                    borderColor: '#1FB8CD',
                    backgroundColor: '#1FB8CD33',
                    fill: true
                }, {
                    label: 'Connections',
                    data: [85, 132, 165, 186],
                    borderColor: '#B4413C',
                    backgroundColor: '#B4413C33',
                    fill: true
                }, {
                    label: 'Appointments',
                    data: [12, 18, 24, 28],
                    borderColor: '#5D878F',
                    backgroundColor: '#5D878F33',
                    fill: true
                }]
            };
            
            window.callPerformanceChartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: { beginAtZero: true }
                    }
                }
            });
        }
        
        // Render A/B test chart
        function renderABTestChart() {
            const ctx = document.getElementById('abTestChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (window.abTestChartInstance) {
                window.abTestChartInstance.destroy();
            }
            
            const data = {
                labels: ['Subject Line A', 'Subject Line B', 'Subject Line C'],
                datasets: [{
                    label: 'Open Rate %',
                    data: [42, 38, 45],
                    backgroundColor: ['#1FB8CD', '#FFC185', '#B4413C']
                }]
            };
            
            window.abTestChartInstance = new Chart(ctx, {
                type: 'bar',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, max: 50 }
                    }
                }
            });
        }
        
        // Render revenue chart
        function renderRevenueChart() {
            const ctx = document.getElementById('revenueChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            if (window.revenueChartInstance) {
                window.revenueChartInstance.destroy();
            }
            
            const data = {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'Revenue Generated (£)',
                    data: [25000, 45000, 68000, 85000, 120000, 150000],
                    borderColor: '#1FB8CD',
                    backgroundColor: '#1FB8CD33',
                    fill: true,
                    tension: 0.4
                }]
            };
            
            window.revenueChartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                callback: function(value) {
                                    return '£' + (value / 1000) + 'k';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // Render performance chart
        function renderPerformanceChart() {
            const ctx = document.getElementById('performanceChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            // Destroy existing chart if it exists
            if (window.performanceChartInstance) {
                window.performanceChartInstance.destroy();
            }
            
            const data = {
                labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                datasets: [{
                    label: 'Emails Sent',
                    data: [120, 190, 300, 250],
                    borderColor: '#1FB8CD',
                    backgroundColor: '#1FB8CD33',
                    fill: true
                }, {
                    label: 'Responses',
                    data: [12, 19, 24, 20],
                    borderColor: '#B4413C',
                    backgroundColor: '#B4413C33',
                    fill: true
                }]
            };
            
            window.performanceChartInstance = new Chart(ctx, {
                type: 'line',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Render pipeline chart
        function renderPipelineChart() {
            const ctx = document.getElementById('pipelineChart');
            if (!ctx || typeof Chart === 'undefined') return;
            
            // Destroy existing chart if it exists
            if (window.pipelineChartInstance) {
                window.pipelineChartInstance.destroy();
            }
            
            // Count prospects by stage
            const stageCounts = {
                new: 0,
                contacted: 0,
                responded: 0,
                demo: 0,
                pilot: 0,
                client: 0
            };
            
            appData.prospects.forEach(p => {
                if (stageCounts.hasOwnProperty(p.stage)) {
                    stageCounts[p.stage]++;
                }
            });
            
            const data = {
                labels: ['New Leads', 'Contacted', 'Responded', 'Demo Booked', 'Pilot Program', 'Client'],
                datasets: [{
                    label: 'Prospects',
                    data: Object.values(stageCounts),
                    backgroundColor: [
                        '#1FB8CD',
                        '#FFC185',
                        '#B4413C',
                        '#ECEBD5',
                        '#5D878F',
                        '#DB4545'
                    ]
                }]
            };
            
            window.pipelineChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Navigation setup
        function setupNavigation() {
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.getAttribute('data-section');
                    showSection(section);
                    
                    // Update active nav link
                    navLinks.forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                });
            });
        }

        // Show specific section with loading animation
        function showSection(sectionName) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.add('hidden');
            });
            
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.classList.remove('hidden');
                
                // Trigger section-specific rendering
                switch(sectionName) {
                    case 'scraping':
                        renderScrapingEngine();
                        break;
                    case 'voice':
                        renderVoiceCallingSystem();
                        break;
                    case 'github':
                        renderGitHubTalentIntelligence();
                        break;
                    case 'portal':
                        renderCandidatePortal();
                        break;
                    case 'intelligence':
                        renderBusinessIntelligence();
                        break;
                    case 'candidates':
                        renderCandidateIntelligence();
                        break;
                    case 'automation':
                        renderEmailAutomation();
                        break;
                    case 'crm':
                        renderAdvancedCRM();
                        break;
                    case 'workflows':
                        renderAutomationWorkflows();
                        break;
                    case 'analytics':
                        renderAdvancedAnalytics();
                        break;
                    case 'dashboard':
                        renderDashboardMetrics();
                        renderIndustryPerformance();
                        break;
                }
            }
        }
        
        // Render data scraping engine
        function renderScrapingEngine() {
            const container = document.getElementById('scraping-results');
            if (!container) return;
            
            const metrics = appData.scrapingMetrics;
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Live Scraping Results</h3>
                        <span class="status status--success">DISCOVERING PROSPECTS</span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 16px;">
                        <div style="padding: 12px; background: var(--color-bg-1); border-radius: var(--radius-base);">
                            <div style="font-weight: 600; margin-bottom: 4px;">🗺️ Google Maps Discovery</div>
                            <div style="font-size: 12px; margin: 2px 0;">Insurance London: <strong>${metrics.google_maps_results.insurance_london}</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Coaching Manchester: <strong>${metrics.google_maps_results.coaching_manchester}</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Builders Birmingham: <strong>${metrics.google_maps_results.builders_birmingham}</strong></div>
                        </div>
                        
                        <div style="padding: 12px; background: var(--color-bg-3); border-radius: var(--radius-base);">
                            <div style="font-weight: 600; margin-bottom: 4px;">🏢 Companies House Data</div>
                            <div style="font-size: 12px; margin: 2px 0;">Companies Enriched: <strong>${metrics.companies_house_enriched.toLocaleString()}</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Directors Identified: <strong>45,000+</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Financial Data: <strong>98% Complete</strong></div>
                        </div>
                        
                        <div style="padding: 12px; background: var(--color-bg-5); border-radius: var(--radius-base);">
                            <div style="font-weight: 600; margin-bottom: 4px;">💼 LinkedIn Intelligence</div>
                            <div style="font-size: 12px; margin: 2px 0;">Profiles Analyzed: <strong>${metrics.linkedin_profiles_analyzed.toLocaleString()}</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Contacts Verified: <strong>18,500</strong></div>
                            <div style="font-size: 12px; margin: 2px 0;">Email Discovery: <strong>92% Success</strong></div>
                        </div>
                    </div>
                    
                    <div style="margin: 16px 0; padding: 12px; background: var(--color-bg-2); border-radius: var(--radius-base); border-left: 4px solid var(--color-success);">
                        <div style="font-weight: 600; margin-bottom: 4px;">🚀 Real-Time Discovery Status</div>
                        <div style="font-size: 13px; line-height: 1.4;">
                            <div>• <strong>${metrics.prospects_discovered_today}</strong> new prospects discovered today</div>
                            <div>• <strong>${metrics.accuracy_rate}%</strong> data accuracy rate maintained</div>
                            <div>• <strong>${metrics.active_scrapers}</strong> scraping engines running simultaneously</div>
                            <div>• Next batch processing in <strong>12 minutes</strong></div>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Render voice calling system
        function renderVoiceCallingSystem() {
            const container = document.getElementById('voice-campaigns');
            if (!container) return;
            
            const campaigns = appData.voiceCalling.active_campaigns;
            
            container.innerHTML = campaigns.map(campaign => `
                <div class="card industry-${campaign.industry}" style="margin-bottom: 16px;">
                    <div class="card-header">
                        <h4 style="margin: 0;">${campaign.name}</h4>
                        <span class="status status--success">CALLING</span>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 12px 0;">
                        <div class="stat">
                            <div class="stat-value">${campaign.prospects_enrolled}</div>
                            <div class="stat-label">Prospects</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${campaign.calls_made}</div>
                            <div class="stat-label">Calls Made</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${campaign.connect_rate}%</div>
                            <div class="stat-label">Connect Rate</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${campaign.appointment_rate}%</div>
                            <div class="stat-label">Appointments</div>
                        </div>
                    </div>
                    
                    <div style="background: var(--color-bg-1); padding: 10px; border-radius: var(--radius-sm); margin: 12px 0; font-size: 12px;">
                        <strong>AI Script Preview:</strong> "${campaign.script_preview}"
                    </div>
                    
                    <div style="display: flex; gap: 8px; margin-top: 12px;">
                        <button class="btn btn--primary btn--sm" onclick="viewCallRecordings('${campaign.campaign_id}')">
                            <i class="fas fa-play"></i> Call Recordings
                        </button>
                        <button class="btn btn--secondary btn--sm" onclick="editVoiceScript('${campaign.campaign_id}')">
                            <i class="fas fa-edit"></i> Edit Script
                        </button>
                        <button class="btn btn--secondary btn--sm" onclick="pauseCampaign('${campaign.campaign_id}')">
                            <i class="fas fa-pause"></i> Pause
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Apply filters
        function applyFilters() {
            currentFilters.industry = document.getElementById('industry-filter').value;
            currentFilters.location = document.getElementById('location-filter').value;
            
            renderJobListings();
            renderCompanyListings();
        }

        // Filter jobs based on current filters
        function filterJobs(jobs) {
            return jobs.filter(job => {
                const industryMatch = currentFilters.industry === 'all' || job.industry === currentFilters.industry;
                const locationMatch = currentFilters.location === 'all' || job.location.toLowerCase().includes(currentFilters.location);
                return industryMatch && locationMatch;
            });
        }

        // Render job listings
        function renderJobListings() {
            const container = document.getElementById('job-listings');
            let allJobs = [];
            
            // Combine all job data
            Object.keys(appData.jobs).forEach(industry => {
                allJobs = allJobs.concat(appData.jobs[industry]);
            });

            // Apply filters
            const filteredJobs = filterJobs(allJobs);

            if (filteredJobs.length === 0) {
                container.innerHTML = '<p class="text-center">No jobs found matching your criteria.</p>';
                return;
            }

            container.innerHTML = filteredJobs.map(job => `
                <div class="job-listing industry-${job.industry}">
                    <div class="flex justify-between items-center mb-12">
                        <h3 class="job-title">${job.title}</h3>
                        <div class="status status--new">${job.job_board || 'Job Board'}</div>
                    </div>
                    <div class="job-company">${job.company}</div>
                    <div class="job-details">
                        <span><i class="fas fa-map-marker-alt"></i> ${job.location}</span>
                        <span><i class="fas fa-pound-sign"></i> ${job.salary}</span>
                        <span><i class="fas fa-clock"></i> ${job.posted_ago || job.posted_date}</span>
                        <span><i class="fas fa-users"></i> ${job.company_size}</span>
                    </div>
                    ${job.requirements ? `
                    <div style="margin: 12px 0; padding: 8px; background: var(--color-bg-1); border-radius: var(--radius-sm); font-size: 12px;">
                        <strong>Requirements:</strong> ${job.requirements.join(', ')}
                    </div>
                    ` : ''}
                    ${job.description ? `
                    <div style="margin: 12px 0; color: var(--color-text-secondary); font-size: 13px; line-height: 1.4;">
                        ${job.description}
                    </div>
                    ` : ''}
                    <div class="job-actions">
                        <button class="btn btn--primary btn--sm" onclick="addToTargetList('${job.company}', '${job.industry}', '${job.hr_contact || 'hr@company.com'}', '${job.hiring_manager || 'HR Manager'}')">
                            <i class="fas fa-plus"></i> Add to Target List
                        </button>
                        <button class="btn btn--secondary btn--sm" onclick="viewCompanyProfile('${job.company}', '${job.industry}')">
                            <i class="fas fa-building"></i> Company Profile
                        </button>
                        <button class="btn btn--secondary btn--sm" onclick="trackCompetitor('${job.company}', '${job.title}')">
                            <i class="fas fa-eye"></i> Track Competitor
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // Render company listings
        function renderCompanyListings() {
            const container = document.getElementById('company-listings');
            let allJobs = [];
            
            // Combine all job data
            Object.keys(appData.jobs).forEach(industry => {
                allJobs = allJobs.concat(appData.jobs[industry]);
            });

            // Apply filters and get unique companies
            const filteredJobs = filterJobs(allJobs);
            const uniqueCompanies = new Map();
            
            filteredJobs.forEach(job => {
                if (!uniqueCompanies.has(job.company)) {
                    uniqueCompanies.set(job.company, {
                        ...job,
                        openPositions: filteredJobs.filter(j => j.company === job.company).length
                    });
                }
            });

            const companies = Array.from(uniqueCompanies.values());

            if (companies.length === 0) {
                container.innerHTML = '<p class="text-center">No companies found matching your criteria.</p>';
                return;
            }

            container.innerHTML = companies.map(company => {
                // Get benchmark data for this industry
                const benchmark = appData.industryBenchmarks[company.industry] || {};
                const isProspect = appData.prospects.find(p => p.company === company.company);
                
                return `
                <div class="company-card industry-${company.industry}">
                    <div class="company-header">
                        <div>
                            <h3 class="company-name">${company.company}</h3>
                            <div class="company-industry">${company.industry.replace('_', ' ').toUpperCase()}</div>
                            ${company.company_revenue ? `<div style="font-size: 11px; color: var(--color-text-secondary); margin-top: 4px;">Revenue: ${company.company_revenue}</div>` : ''}
                        </div>
                        <div class="status ${isProspect ? `status--${isProspect.stage}` : 'status--new'}">
                            ${isProspect ? isProspect.stage.toUpperCase() : 'TARGET'}
                        </div>
                    </div>
                    
                    ${company.hr_contact ? `
                    <div style="margin: 12px 0; padding: 8px; background: var(--color-bg-2); border-radius: var(--radius-sm);">
                        <div style="font-size: 12px; font-weight: 500;">${company.hiring_manager || 'HR Contact'}</div>
                        <div style="font-size: 11px; color: var(--color-text-secondary);">${company.hr_contact}</div>
                    </div>
                    ` : ''}
                    
                    <div class="company-stats">
                        <div class="stat">
                            <div class="stat-value">${company.openPositions}</div>
                            <div class="stat-label">Open Positions</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${company.company_size.split(' ')[0].replace('+', '')}</div>
                            <div class="stat-label">Employees</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">${benchmark.talent_shortage_score || 'N/A'}</div>
                            <div class="stat-label">Talent Gap Score</div>
                        </div>
                    </div>
                    
                    <div style="margin: 12px 0; padding: 8px; background: var(--color-bg-3); border-radius: var(--radius-sm); font-size: 11px;">
                        <div><strong>Avg. Time to Hire:</strong> ${benchmark.avg_time_to_hire || 'N/A'} days</div>
                        <div><strong>Avg. Cost per Hire:</strong> ${benchmark.avg_cost_per_hire ? '£' + benchmark.avg_cost_per_hire.toLocaleString() : 'N/A'}</div>
                    </div>
                    
                    <div class="job-actions mt-16">
                        <button class="btn btn--primary btn--sm" onclick="startEmailCampaign('${company.company}', '${company.industry}', '${company.hr_contact || ''}', '${company.hiring_manager || 'HR Manager'}')">
                            <i class="fas fa-envelope"></i> Start Campaign
                        </button>
                        <button class="btn btn--secondary btn--sm" onclick="window.open('https://${company.company_website}', '_blank')">
                            <i class="fas fa-external-link-alt"></i> Visit Website
                        </button>
                    </div>
                </div>
            `}).join('');
        }

        // Render email templates
        function renderEmailTemplates() {
            const container = document.getElementById('email-templates');
            
            container.innerHTML = Object.keys(appData.emailTemplates).map(industry => {
                const templates = appData.emailTemplates[industry];
                const campaignStats = appData.campaigns[`${industry}_q4_2025`] || appData.campaigns[`${industry}_expansion`] || {};
                
                return Object.keys(templates).map(templateType => {
                    const template = templates[templateType];
                    return `
                        <div class="email-template industry-${industry}">
                            <div class="template-header">
                                <div>
                                    <div class="template-name">${industry.replace('_', ' ').toUpperCase()} - ${templateType.replace('_', ' ').toUpperCase()}</div>
                                    <div style="font-size: 11px; color: var(--color-text-secondary); margin-top: 4px;">
                                        ${campaignStats.open_rate ? `Open Rate: ${campaignStats.open_rate}% | Click Rate: ${campaignStats.click_rate}%` : 'No performance data yet'}
                                    </div>
                                </div>
                                <div class="template-industry">${industry}</div>
                            </div>
                            <div class="template-preview">
                                <strong>Subject:</strong> ${template.subject}<br><br>
                                <div style="white-space: pre-line; max-height: 120px; overflow: hidden; position: relative;">
                                    ${template.body}
                                    <div style="position: absolute; bottom: 0; left: 0; right: 0; height: 20px; background: linear-gradient(transparent, var(--color-bg-1));"></div>
                                </div>
                            </div>
                            <div style="margin: 12px 0; display: flex; gap: 8px; flex-wrap: wrap;">
                                <span style="font-size: 10px; padding: 2px 6px; background: var(--color-bg-4); border-radius: 10px;">{{contact_name}}</span>
                                <span style="font-size: 10px; padding: 2px 6px; background: var(--color-bg-5); border-radius: 10px;">{{company}}</span>
                                <span style="font-size: 10px; padding: 2px 6px; background: var(--color-bg-6); border-radius: 10px;">{{location}}</span>
                            </div>
                            <div class="job-actions mt-16">
                                <button class="btn btn--primary btn--sm" onclick="useTemplate('${industry}', '${templateType}')">
                                    <i class="fas fa-paper-plane"></i> Use Template
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="editTemplate('${industry}', '${templateType}')">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="previewTemplate('${industry}', '${templateType}')">
                                    <i class="fas fa-eye"></i> Preview
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="duplicateTemplate('${industry}', '${templateType}')">
                                    <i class="fas fa-copy"></i> Duplicate
                                </button>
                            </div>
                        </div>
                    `;
                }).join('');
            }).join('');
        }

        // Render prospect pipeline
        function renderProspectPipeline() {
            const container = document.getElementById('prospect-pipeline');
            const stages = [
                { key: 'new', name: 'New Lead', color: '#3B82F6' },
                { key: 'contacted', name: 'Contacted', color: '#F59E0B' },
                { key: 'responded', name: 'Responded', color: '#10B981' },
                { key: 'demo', name: 'Demo Booked', color: '#8B5CF6' },
                { key: 'pilot', name: 'Pilot Program', color: '#EF4444' },
                { key: 'client', name: 'Client', color: '#059669' }
            ];

            container.innerHTML = stages.map(stage => {
                const stageProspects = appData.prospects.filter(p => p.stage === stage.key);
                return `
                    <div class="pipeline-column">
                        <div class="pipeline-header">
                            <div style="width: 12px; height: 12px; background-color: ${stage.color}; border-radius: 50%;"></div>
                            <div class="pipeline-title">${stage.name}</div>
                            <div class="pipeline-count">${stageProspects.length}</div>
                        </div>
                        ${stageProspects.map(prospect => `
                            <div class="prospect-card" onclick="viewProspect('${prospect.email}')">
                                <div class="prospect-name">${prospect.name}</div>
                                <div class="prospect-company">${prospect.company}</div>
                                <div class="status status--${prospect.stage}" style="margin-top: 8px; font-size: 10px;">
                                    ${prospect.industry.replace('_', ' ')}
                                </div>
                            </div>
                        `).join('')}
                    </div>
                `;
            }).join('');
        }

        // Render analytics
        function renderAnalytics() {
            const container = document.getElementById('analytics-metrics');
            const selectedIndustry = document.getElementById('analytics-industry').value;
            
            let data;
            if (selectedIndustry === 'all') {
                // Aggregate all industries
                data = {
                    emails_sent: Object.values(appData.analytics).reduce((sum, industry) => sum + industry.emails_sent, 0),
                    open_rate: Math.round(Object.values(appData.analytics).reduce((sum, industry) => sum + industry.open_rate, 0) / Object.keys(appData.analytics).length),
                    click_rate: Math.round(Object.values(appData.analytics).reduce((sum, industry) => sum + industry.click_rate, 0) / Object.keys(appData.analytics).length),
                    response_rate: Math.round(Object.values(appData.analytics).reduce((sum, industry) => sum + industry.response_rate, 0) / Object.keys(appData.analytics).length),
                    demos_booked: Object.values(appData.analytics).reduce((sum, industry) => sum + industry.demos_booked, 0)
                };
            } else {
                data = appData.analytics[selectedIndustry];
            }

            container.innerHTML = `
                <div class="metric-card">
                    <div class="metric-value">${data.emails_sent}</div>
                    <div class="metric-label">Emails Sent</div>
                    <div class="metric-change metric-change--positive">↗ 15% vs last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${data.open_rate}%</div>
                    <div class="metric-label">Open Rate</div>
                    <div class="metric-change metric-change--positive">↗ 3% vs industry avg</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${data.click_rate}%</div>
                    <div class="metric-label">Click Rate</div>
                    <div class="metric-change metric-change--positive">↗ 2% vs last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${data.response_rate}%</div>
                    <div class="metric-label">Response Rate</div>
                    <div class="metric-change metric-change--positive">↗ 1% vs last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${data.demos_booked}</div>
                    <div class="metric-label">Demos Booked</div>
                    <div class="metric-change metric-change--positive">↗ 5 vs last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">£${Math.round(data.demos_booked * 25000)}</div>
                    <div class="metric-label">Pipeline Value</div>
                    <div class="metric-change metric-change--positive">↗ £125k vs last month</div>
                </div>
            `;
        }

        // Action functions
        // New comprehensive functions for the ultimate platform
        
        // Start bulk scraping across all sources
        function startBulkScraping() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Discovering Prospects...';
            btn.disabled = true;
            
            // Simulate bulk discovery process
            setTimeout(() => {
                const newProspects = Math.floor(Math.random() * 50) + 20;
                appData.scrapingMetrics.prospects_discovered_today += newProspects;
                
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                showNotification(`Bulk discovery complete! Found ${newProspects} new prospects across Google Maps, Companies House, and LinkedIn.`, 'success');
                
                // Update displays
                renderScrapingEngine();
            }, 3000);
        }
        
        // View scraping logs
        function viewScrapingLogs() {
            const logWindow = window.open('', '_blank', 'width=900,height=600');
            const timestamp = new Date().toISOString();
            logWindow.document.write('<html><head><title>TalentEdge AI - Scraping Activity Logs</title><style>body { font-family: monospace; padding: 20px; background: #1a1a1a; color: #00ff00; }.log-entry { margin: 2px 0; font-size: 12px; }.success { color: #00ff00; }.warning { color: #ffaa00; }.error { color: #ff4444; }.info { color: #00aaff; }</style></head><body><h2>TalentEdge AI Scraping Engine - Live Logs</h2><div class="log-entry success">[' + timestamp + '] Google Maps scraper: Discovered 12 insurance brokers in London</div><div class="log-entry success">[' + timestamp + '] Companies House API: Enriched Marsh McLennan with financial data</div><div class="log-entry info">[' + timestamp + '] LinkedIn scraper: Identified decision maker Sarah Johnson</div></body></html>');
        }
        
        // Launch voice campaign
        function launchVoiceCampaign() {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            
            modal.innerHTML = '<div style="background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%;"><h3 style="margin-top: 0;">🎯 Launch AI Voice Campaign</h3><div style="margin: 20px 0;"><label style="display: block; margin-bottom: 8px; font-weight: 500;">Campaign Name:</label><input type="text" id="voice-campaign-name" placeholder="e.g., Insurance Q4 Outreach" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></div><div style="margin: 20px 0;"><label style="display: block; margin-bottom: 8px; font-weight: 500;">Target Industry:</label><select id="voice-industry" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"><option value="insurance">Insurance</option><option value="coaching">Coaching</option><option value="builders_merchant">Builders Merchant</option></select></div><div style="margin-top: 20px; text-align: right;"><button onclick="this.closest(\'div\').closest(\'div\').remove()" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin-right: 10px;">Cancel</button><button onclick="createVoiceCampaignAction(this)" style="background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px;">Launch Campaign</button></div></div>';
            
            document.body.appendChild(modal);
        }
        
        function createVoiceCampaignAction(button) {
            const modal = button.closest('div').closest('div');
            const name = modal.querySelector('#voice-campaign-name').value;
            const industry = modal.querySelector('#voice-industry').value;
            
            if (!name) {
                alert('Please enter a campaign name.');
                return;
            }
            
            modal.remove();
            showNotification(`Voice campaign "${name}" launched for ${industry} industry! AI agents are now making calls.`, 'success');
            
            // Add to active campaigns
            appData.voiceCalling.active_campaigns.push({
                campaign_id: 'VOICE_' + Date.now(),
                name: name,
                industry: industry,
                prospects_enrolled: Math.floor(Math.random() * 100) + 50,
                calls_made: 0,
                connect_rate: 0,
                appointment_rate: 0,
                status: 'active'
            });
            
            renderVoiceCallingSystem();
        }
        
        // Export prospect data
        function exportProspectData() {
            showNotification('Exporting comprehensive prospect database with enriched data...', 'info');
            
            setTimeout(() => {
                showNotification('Export complete! Downloaded 25,000 prospects with full intelligence data.', 'success');
            }, 2000);
        }
        
        function refreshJobs() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            btn.disabled = true;
            
            // Simulate API call with realistic delay
            setTimeout(() => {
                // Simulate finding new jobs
                const newJobs = [
                    {
                        title: "Senior Risk Analyst",
                        company: "Zurich Insurance",
                        location: "London",
                        salary: "£55,000 - £75,000",
                        posted_ago: "1 hour ago",
                        industry: "insurance",
                        company_size: "1000+",
                        job_board: "LinkedIn Jobs",
                        requirements: ["FCA Knowledge", "Risk Management", "Insurance"],
                        company_website: "zurich.co.uk"
                    }
                ];
                
                // Add new jobs to the data
                appData.jobs.insurance = [...appData.jobs.insurance, ...newJobs];
                
                renderJobListings();
                btn.innerHTML = originalText;
                btn.disabled = false;
                
                // Show success notification
                showNotification('Found ' + newJobs.length + ' new job posting(s)!', 'success');
                
                // Update dashboard metrics
                appData.dashboardMetrics.total_prospects += newJobs.length;
            }, 2000);
        }

        function addToTargetList(company, industry, hrContact = '', hiringManager = '') {
            // Check if company already exists as prospect
            const existingProspect = appData.prospects.find(p => p.company === company);
            if (existingProspect) {
                showNotification(company + ' is already in your prospect pipeline as "' + existingProspect.stage.toUpperCase() + '"!', 'warning');
                return;
            }

            // Add to prospects with new stage
            const newProspect = {
                prospect_id: `PROS_${Date.now().toString().substr(-3)}`,
                name: hiringManager || 'HR Director',
                title: hiringManager ? 'Hiring Manager' : 'HR Director',
                company: company,
                stage: 'new',
                industry: industry,
                email: hrContact || `hr@${company.toLowerCase().replace(/\s+/g, '').replace(/[^a-z0-9]/g, '')}.com`,
                phone: '+44 20 XXXX XXXX',
                company_size: '100+',
                location: 'UK',
                lastContact: new Date().toISOString().split('T')[0],
                notes: `Added from job posting. Industry: ${industry.replace('_', ' ')}.`,
                email_opens: 0,
                email_clicks: 0,
                response_sentiment: 'Unknown'
            };
            appData.prospects.push(newProspect);
            
            renderProspectPipeline();
            renderCompanyListings(); // Update company view to show new status
            showNotification(company + ' added to target list!', 'success');
            
            // Update metrics
            appData.dashboardMetrics.total_prospects += 1;
        }

        function viewCompanyProfile(company) {
            alert(`Viewing detailed profile for ${company}\n\n• Company Intelligence\n• Hiring History\n• Key Contacts\n• Recent Job Postings\n• Competition Analysis`);
        }

        async function startEmailCampaign(company, industry, hrContact = '', hiringManager = '') {
            const templates = appData.emailTemplates[industry];
            if (!templates) {
                showNotification('No email templates available for this industry.', 'error');
                return;
            }

            const template = templates.cold_outreach || templates[Object.keys(templates)[0]];
            const confirmMessage = 'Start AI-powered email campaign for ' + company + '?\n\nThis will:\n• Generate personalized email with OpenAI\n• Send via Resend with tracking\n• Schedule 6 follow-up emails over 3 weeks\n• Track opens, clicks, and responses\n• Move prospect to "Contacted" stage';
            
            if (confirm(confirmMessage)) {
                // Show loading state
                showNotification('Initializing AI-powered campaign...', 'info');
                
                try {
                    // Step 1: Generate AI email
                    const aiEmail = await simulateOpenAIGeneration('email_generation', {
                        company: company,
                        industry: industry,
                        contact: hiringManager || 'HR Director'
                    });
                    
                    // Step 2: Find or create prospect
                    let prospect = appData.prospects.find(p => p.company === company);
                if (!prospect) {
                    prospect = {
                        prospect_id: 'PROS_' + Date.now().toString().substr(-3),
                        name: hiringManager || 'HR Director',
                        title: hiringManager ? 'Hiring Manager' : 'HR Director',
                        company: company,
                        stage: 'contacted',
                        industry: industry,
                        email: hrContact || `hr@${company.toLowerCase().replace(/\s+/g, '').replace(/[^a-z0-9]/g, '')}.com`,
                        phone: '+44 20 XXXX XXXX',
                        company_size: '100+',
                        location: 'UK',
                        lastContact: new Date().toISOString().split('T')[0],
                        notes: `Email campaign started with ${template.subject}`,
                        email_opens: 0,
                        email_clicks: 0,
                        response_sentiment: 'Unknown'
                    };
                    appData.prospects.push(prospect);
                } else {
                    prospect.stage = 'contacted';
                    prospect.lastContact = new Date().toISOString().split('T')[0];
                    prospect.notes = (prospect.notes || '') + ' | Campaign started: ' + template.subject;
                }
                
                    // Step 3: Send email via Resend API
                    const sendResult = await simulateResendEmail(
                        prospect.email,
                        aiEmail.subject,
                        aiEmail.body
                    );
                    
                    // Track the email
                    const emailId = emailTracking.trackEmail(prospect.prospect_id || prospect.email, 'cold_outreach');
                
                // Add to recent activities
                appData.recentActivities.unshift({
                    activity_id: 'ACT_' + Date.now(),
                    type: "email_sent",
                    prospect: prospect.name,
                    company: company,
                    timestamp: new Date().toISOString(),
                    details: 'Email campaign started: ' + template.subject
                });
                
                // Update analytics
                if (appData.analytics[industry]) {
                    appData.analytics[industry].emails_sent += 1;
                }
                
                    renderProspectPipeline();
                    renderCompanyListings();
                    
                    showNotification(`AI campaign launched for ${company}! Resend ID: ${sendResult.id.substr(-8)}`, 'success');
                
                    // Simulate email engagement after short delay
                    setTimeout(() => {
                        if (Math.random() > 0.6) { // 40% chance of opening
                            emailTracking.markOpened(emailId);
                            prospect.email_opens = (prospect.email_opens || 0) + 1;
                            showNotification(prospect.name + ' at ' + company + ' opened your email!', 'info');
                        }
                    }, 5000 + Math.random() * 10000);
                } catch (error) {
                    showNotification('Campaign error: ' + error.message, 'error');
                }
            }
        }

        function editTemplate(industry, templateType = 'cold_outreach') {
            const template = appData.emailTemplates[industry][templateType];
            
            const editWindow = window.open('', '_blank', 'width=800,height=600');
            editWindow.document.write('
                <html>
                    <head>
                        <title>Edit Email Template - ${industry.replace('_', ' ').toUpperCase()}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
                            .container { max-width: 700px; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                            input, textarea { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
                            textarea { min-height: 300px; font-family: inherit; resize: vertical; }
                            label { display: block; margin: 15px 0 5px; font-weight: bold; }
                            .btn { background: #33808D; color: white; border: none; padding: 12px 24px; border-radius: 4px; cursor: pointer; margin-right: 10px; }
                            .btn:hover { background: #2a6b77; }
                            .btn-secondary { background: #6c757d; }
                            .preview { background: #f8f9fa; padding: 15px; border-radius: 4px; margin-top: 20px; }
                            .variables { background: #e9ecef; padding: 10px; border-radius: 4px; font-size: 12px; margin: 10px 0; }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <h2>Edit Email Template</h2>
                            <p><strong>Industry:</strong> ${industry.replace('_', ' ').toUpperCase()} | <strong>Type:</strong> ${templateType.replace('_', ' ').toUpperCase()}</p>
                            
                            <label>Subject Line:</label>
                            <input type="text" id="subject" value="${template.subject}">
                            
                            <div class="variables">
                                <strong>Available Variables:</strong> {{contact_name}}, {{company}}, {{industry_focus}}, {{location}}, {{years_at_company}}
                            </div>
                            
                            <label>Email Body:</label>
                            <textarea id="body">${template.body}</textarea>
                            
                            <div style="margin-top: 20px;">
                                <button class="btn" onclick="saveTemplate()">Save Changes</button>
                                <button class="btn btn-secondary" onclick="previewEmail()">Preview</button>
                                <button class="btn btn-secondary" onclick="window.close()">Cancel</button>
                            </div>
                            
                            <div id="preview" class="preview" style="display: none;">
                                <h4>Preview:</h4>
                                <div id="preview-content"></div>
                            </div>
                        </div>
                        
                        <script>
                            function saveTemplate() {
                                const subject = document.getElementById('subject').value;
                                const body = document.getElementById('body').value;
                                
                                if (window.opener && !window.opener.closed) {
                                    window.opener.appData.emailTemplates['${industry}']['${templateType}'].subject = subject;
                                    window.opener.appData.emailTemplates['${industry}']['${templateType}'].body = body;
                                    window.opener.renderEmailTemplates();
                                    window.opener.showNotification('Template updated successfully!', 'success');
                                }
                                window.close();
                            }
                            
                            function previewEmail() {
                                const subject = document.getElementById('subject').value;
                                const body = document.getElementById('body').value;
                                
                                const preview = document.getElementById('preview');
                                const content = document.getElementById('preview-content');
                                
                                // Replace variables with sample data
                                const sampleBody = body
                                    .replace(/{{contact_name}}/g, 'John Smith')
                                    .replace(/{{company}}/g, 'ABC Company Ltd')
                                    .replace(/{{industry_focus}}/g, 'commercial insurance')
                                    .replace(/{{location}}/g, 'London')
                                    .replace(/{{years_at_company}}/g, '5');
                                    
                                content.innerHTML = ` '<strong>Subject:</strong> ' + subject + '<br><br>' + sampleBody.replace(/\\n/g, '<br>');
                                preview.style.display = 'block';
                            }
                        </script>
                    </body>
                </html>
            `);
        }

        function previewTemplate(industry, templateType = 'cold_outreach') {
            const template = appData.emailTemplates[industry][templateType];
            
            // Get a sample prospect for realistic preview
            const sampleProspect = appData.prospects.find(p => p.industry === industry) || {
                name: 'John Smith',
                company: 'Sample Company Ltd',
                location: 'London'
            };
            
            const previewWindow = window.open('', '_blank', 'width=700,height=600');
            previewWindow.document.write(`
                <html>
                    <head>
                        <title>Email Preview - ${industry.replace('_', ' ').toUpperCase()}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 30px; background: #f5f5f5; }
                            .email-container { max-width: 600px; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 15px rgba(0,0,0,0.1); }
                            .email-header { border-bottom: 2px solid #33808D; padding-bottom: 15px; margin-bottom: 20px; }
                            .subject { font-size: 18px; font-weight: bold; color: #333; margin-bottom: 10px; }
                            .email-body { line-height: 1.6; color: #444; white-space: pre-line; }
                            .signature { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; font-size: 14px; }
                            .variables { background: #e3f2fd; padding: 15px; border-radius: 4px; margin-bottom: 20px; font-size: 12px; }
                        </style>
                    </head>
                    <body>
                        <div class="email-container">
                            <div class="email-header">
                                <div class="subject">Subject: ${template.subject.replace(/{{contact_name}}/g, sampleProspect.name).replace(/{{company}}/g, sampleProspect.company)}</div>
                                <div style="font-size: 14px; color: #666;">From: Ben Palmer &lt;ben@talentedge.ai&gt;</div>
                                <div style="font-size: 14px; color: #666;">To: ${sampleProspect.name} &lt;${sampleProspect.email || 'contact@company.com'}&gt;</div>
                            </div>
                            
                            <div class="variables">
                                <strong>Template Variables Replaced:</strong><br>
                                {{contact_name}} → ${sampleProspect.name}<br>
                                {{company}} → ${sampleProspect.company}<br>
                                {{location}} → ${sampleProspect.location || 'London'}
                            </div>
                            
                            <div class="email-body">${template.body
                                .replace(/{{contact_name}}/g, sampleProspect.name)
                                .replace(/{{company}}/g, sampleProspect.company)
                                .replace(/{{industry_focus}}/g, industry.replace('_', ' '))
                                .replace(/{{location}}/g, sampleProspect.location || 'London')
                                .replace(/{{years_at_company}}/g, '3-5')}</div>
                            
                            <div class="signature">
                                <em>This is a preview with sample data. Actual emails will use real prospect information.</em>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="window.close()" style="background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Close Preview</button>
                        </div>
                    </body>
                </html>
            `);
        }

        function viewProspect(email) {
            const prospect = appData.prospects.find(p => p.email === email);
            if (!prospect) return;
            
            const detailWindow = window.open('', '_blank', 'width=800,height=700');
            detailWindow.document.write(`
                <html>
                    <head>
                        <title>Prospect Details - ${prospect.name}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
                            .container { max-width: 700px; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                            .header { border-bottom: 2px solid #33808D; padding-bottom: 15px; margin-bottom: 20px; }
                            .name { font-size: 24px; font-weight: bold; color: #333; }
                            .title { font-size: 16px; color: #666; margin: 5px 0; }
                            .company { font-size: 18px; color: #33808D; }
                            .section { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 5px; }
                            .section h3 { margin-top: 0; color: #333; }
                            .stage-${prospect.stage} { background: #28a745; color: white; padding: 5px 10px; border-radius: 15px; font-size: 12px; display: inline-block; }
                            .metric { display: inline-block; margin: 10px 15px 10px 0; padding: 8px 12px; background: white; border-radius: 5px; border: 1px solid #ddd; }
                            .btn { background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
                            .btn-secondary { background: #6c757d; }
                            .notes { background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <div class="header">
                                <div class="name">${prospect.name}</div>
                                <div class="title">${prospect.title || 'Contact'}</div>
                                <div class="company">${prospect.company}</div>
                                <div style="margin-top: 10px;">
                                    <span class="stage-${prospect.stage}">${prospect.stage.toUpperCase()}</span>
                                </div>
                            </div>
                            
                            <div class="section">
                                <h3>Contact Information</h3>
                                <p><strong>Email:</strong> ${prospect.email}</p>
                                <p><strong>Phone:</strong> ${prospect.phone || 'Not provided'}</p>
                                <p><strong>Industry:</strong> ${prospect.industry.replace('_', ' ').toUpperCase()}</p>
                                <p><strong>Location:</strong> ${prospect.location || 'UK'}</p>
                                <p><strong>Company Size:</strong> ${prospect.company_size || 'Unknown'}</p>
                            </div>
                            
                            <div class="section">
                                <h3>Engagement Metrics</h3>
                                <div class="metric">
                                    <strong>${prospect.email_opens || 0}</strong><br>
                                    <small>Email Opens</small>
                                </div>
                                <div class="metric">
                                    <strong>${prospect.email_clicks || 0}</strong><br>
                                    <small>Email Clicks</small>
                                </div>
                                <div class="metric">
                                    <strong>${prospect.response_sentiment || 'Unknown'}</strong><br>
                                    <small>Sentiment</small>
                                </div>
                                <div class="metric">
                                    <strong>${prospect.lastContact}</strong><br>
                                    <small>Last Contact</small>
                                </div>
                            </div>
                            
                            ${prospect.notes ? `
                            <div class="section notes">
                                <h3>Notes</h3>
                                <p>${prospect.notes}</p>
                            </div>
                            ` : ''}
                            
                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn" onclick="scheduleFollowUp()">Schedule Follow-up</button>
                                <button class="btn btn-secondary" onclick="sendEmail()">Send Email</button>
                                <button class="btn btn-secondary" onclick="addNote()">Add Note</button>
                                <button class="btn btn-secondary" onclick="window.close()">Close</button>
                            </div>
                        </div>
                        
                        <script>
                            function scheduleFollowUp() {
                                alert('Follow-up scheduled for next week!');
                            }
                            
                            function sendEmail() {
                                if (window.opener && !window.opener.closed) {
                                    window.opener.startEmailCampaign('${prospect.company}', '${prospect.industry}', '${prospect.email}', '${prospect.name}');
                                }
                                window.close();
                            }
                            
                            function addNote() {
                                const note = prompt('Add a note:');
                                if (note && window.opener && !window.opener.closed) {
                                    const p = window.opener.appData.prospects.find(pr => pr.email === '${prospect.email}');
                                    if (p) {
                                        p.notes = (p.notes || '') + ' | ' + note;
                                        window.opener.showNotification('Note added successfully!', 'success');
                                    }
                                }
                            }
                        </script>
                    </body>
                </html>
            `);
        }

        function addProspect() {
            const name = prompt('Contact name:');
            const company = prompt('Company name:');
            const industry = prompt('Industry (insurance/coaching/builders_merchant):');
            
            if (name && company && industry) {
                const newProspect = {
                    name: name,
                    company: company,
                    stage: 'new',
                    industry: industry,
                    email: `${name.toLowerCase().replace(' ', '.')}@${company.toLowerCase().replace(/\s+/g, '')}.com`,
                    lastContact: new Date().toISOString().split('T')[0]
                };
                appData.prospects.push(newProspect);
                renderProspectPipeline();
                alert('Prospect added successfully!');
            }
        }

        function updateAnalytics() {
            renderAnalytics();
            renderRecentActivities();
            if (typeof Chart !== 'undefined') {
                renderPerformanceChart();
            }
        }
        
        // Render recent activities
        function renderRecentActivities() {
            const container = document.getElementById('recent-activities');
            if (!container) return;
            
            const activities = appData.recentActivities.slice(0, 10); // Show last 10 activities
            
            container.innerHTML = activities.map(activity => {
                const timeAgo = getTimeAgo(new Date(activity.timestamp));
                let iconClass = 'fas fa-envelope';
                let iconColor = '#3B82F6';
                
                switch(activity.type) {
                    case 'email_sent':
                        iconClass = 'fas fa-envelope';
                        iconColor = '#3B82F6';
                        break;
                    case 'email_opened':
                        iconClass = 'fas fa-envelope-open';
                        iconColor = '#10B981';
                        break;
                    case 'demo_booked':
                        iconClass = 'fas fa-calendar-plus';
                        iconColor = '#8B5CF6';
                        break;
                }
                
                return `
                    <div style="display: flex; align-items: center; padding: 12px; border-bottom: 1px solid var(--color-border);">
                        <div style="width: 32px; height: 32px; border-radius: 50%; background: ${iconColor}15; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <i class="${iconClass}" style="color: ${iconColor}; font-size: 14px;"></i>
                        </div>
                        <div style="flex: 1;">
                            <div style="font-weight: 500; font-size: 14px;">${activity.prospect} at ${activity.company}</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary);">${activity.details}</div>
                        </div>
                        <div style="font-size: 11px; color: var(--color-text-secondary);">${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Helper function to get time ago
        function getTimeAgo(date) {
            const now = new Date();
            const diffInMinutes = Math.floor((now - date) / (1000 * 60));
            
            if (diffInMinutes < 1) return 'Just now';
            if (diffInMinutes < 60) return `${diffInMinutes}m ago`;
            
            const diffInHours = Math.floor(diffInMinutes / 60);
            if (diffInHours < 24) return `${diffInHours}h ago`;
            
            const diffInDays = Math.floor(diffInHours / 24);
            return `${diffInDays}d ago`;
        }
        
        // Render dashboard metrics
        function renderDashboardMetrics() {
            const container = document.getElementById('dashboard-metrics');
            if (!container) return;
            
            const metrics = appData.dashboardMetrics;
            
            container.innerHTML = `
                <div class="metric-card">
                    <div class="metric-value">${metrics.total_prospects}</div>
                    <div class="metric-label">Total Prospects</div>
                    <div class="metric-change metric-change--positive">↗ +${Math.floor(metrics.monthly_growth)}% this month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${metrics.active_campaigns}</div>
                    <div class="metric-label">Active Campaigns</div>
                    <div class="metric-change metric-change--positive">↗ 2 new this week</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${metrics.emails_sent_this_month.toLocaleString()}</div>
                    <div class="metric-label">Emails Sent (Month)</div>
                    <div class="metric-change metric-change--positive">↗ 23% vs last month</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${metrics.response_rate}%</div>
                    <div class="metric-label">Response Rate</div>
                    <div class="metric-change metric-change--positive">↗ 1.2% vs industry avg</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">${metrics.demos_booked}</div>
                    <div class="metric-label">Demos Booked</div>
                    <div class="metric-change metric-change--positive">↗ 5 this week</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">£${(metrics.pipeline_value / 1000).toFixed(0)}k</div>
                    <div class="metric-label">Pipeline Value</div>
                    <div class="metric-change metric-change--positive">↗ £${Math.floor(metrics.monthly_growth * 1000)}k this month</div>
                </div>
            `;
        }
        
        // Render industry performance
        function renderIndustryPerformance() {
            const container = document.getElementById('industry-performance');
            if (!container) return;
            
            const industries = ['insurance', 'coaching', 'builders_merchant'];
            
            container.innerHTML = industries.map(function(industry) {
                const analytics = appData.analytics[industry];
                const benchmark = appData.industryBenchmarks[industry];
                const prospects = appData.prospects.filter(p => p.industry === industry).length;
                
                return `
                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 16px; margin: 8px 0; background: var(--color-bg-${industry === 'insurance' ? '1' : industry === 'coaching' ? '3' : '2'}); border-radius: var(--radius-base);">
                        <div>
                            <div style="font-weight: 600; font-size: 16px; text-transform: capitalize;">${industry.replace('_', ' ')}</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary); margin-top: 4px;">
                                ' + prospects + ' prospects • Shortage Score: ' + benchmark.talent_shortage_score + '
                            </div>
                        </div>
                        <div style="display: flex; gap: 20px; text-align: center;">
                            <div>
                                <div style="font-weight: 600; color: var(--color-primary);">' + analytics.open_rate + '%</div>
                                <div style="font-size: 11px; color: var(--color-text-secondary);">Open Rate</div>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--color-primary);">' + analytics.response_rate + '%</div>
                                <div style="font-size: 11px; color: var(--color-text-secondary);">Response</div>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--color-primary);">' + analytics.demos_booked + '</div>
                                <div style="font-size: 11px; color: var(--color-text-secondary);">Demos</div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // Quick action functions
        function quickJobSearch() {
            const industry = prompt('Enter industry (insurance/coaching/builders_merchant):');
            if (industry && appData.jobs[industry]) {
                currentFilters.industry = industry;
                document.getElementById('industry-filter').value = industry;
                showSection('search');
                document.querySelector('[data-section="search"]').click();
                renderJobListings();
                showNotification('Showing ' + industry.replace('_', ' ') + ' jobs', 'info');
            }
        }
        
        function bulkEmailCampaign() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.5); display: flex; align-items: center;
                justify-content: center; z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <h3 style="margin-top: 0;">Bulk Email Campaign</h3>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Select Industry:</label>
                        <select id="bulk-industry" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="insurance">Insurance</option>
                            <option value="coaching">Coaching</option>
                            <option value="builders_merchant">Builders Merchant</option>
                        </select>
                    </div>
                    
                    <div style="margin: 20px 0;">
                        <label style="display: block; margin-bottom: 8px; font-weight: 500;">Select Prospects:</label>
                        <div id="bulk-prospects" style="max-height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
                            <!-- Will be populated by JavaScript -->
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button onclick="this.closest('div').closest('div').closest('div').remove()" 
                                style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin-right: 10px;">Cancel</button>
                        <button onclick="executeBulkCampaign(this)" 
                                style="background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px;">Send Campaign</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Populate prospects when industry changes
            const industrySelect = modal.querySelector('#bulk-industry');
            const prospectsDiv = modal.querySelector('#bulk-prospects');
            
            function updateProspects() {
                const selectedIndustry = industrySelect.value;
                const prospects = appData.prospects.filter(p => p.industry === selectedIndustry);
                
                prospectsDiv.innerHTML = prospects.map(p => `
                    <label style="display: block; margin: 8px 0; cursor: pointer;">
                        <input type="checkbox" value="${p.email}" style="margin-right: 8px;" checked>
                        ${p.name} - ${p.company} (${p.stage.toUpperCase()})
                    </label>
                `).join('');
            }
            
            industrySelect.addEventListener('change', updateProspects);
            updateProspects(); // Initial load
        }
        
        function executeBulkCampaign(button) {
            const modal = button.closest('div[style*="position: fixed"]');
            const industry = modal.querySelector('#bulk-industry').value;
            const checkboxes = modal.querySelectorAll('#bulk-prospects input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert('Please select at least one prospect.');
                return;
            }
            
            let sentCount = 0;
            checkboxes.forEach(checkbox => {
                const email = checkbox.value;
                const prospect = appData.prospects.find(p => p.email === email);
                if (prospect) {
                    prospect.stage = 'contacted';
                    prospect.lastContact = new Date().toISOString().split('T')[0];
                    emailTracking.trackEmail(prospect.prospect_id || prospect.email, 'bulk_campaign');
                    sentCount++;
                }
            });
            
            modal.remove();
            renderProspectPipeline();
            showNotification('Bulk campaign sent to ' + sentCount + ' prospects!', 'success');
            
            // Update analytics
            if (appData.analytics[industry]) {
                appData.analytics[industry].emails_sent += sentCount;
            }
        }
        
        function exportProspects() {
            const csvData = appData.prospects.map(function(p) {
                return p.name + ',' + p.company + ',' + p.email + ',' + p.industry + ',' + p.stage + ',' + p.lastContact;
            }).join('\n');
            
            const header = 'Name,Company,Email,Industry,Stage,Last Contact\n';
            const blob = new Blob([header + csvData], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'prospects_' + new Date().toISOString().split('T')[0] + '.csv';
            a.click();
            
            window.URL.revokeObjectURL(url);
            showNotification('Prospects exported successfully!', 'success');
        }
        
        function importContacts() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.csv';
            
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const csv = e.target.result;
                        const lines = csv.split('\n');
                        const headers = lines[0].split(',');
                        
                        let importedCount = 0;
                        for (let i = 1; i < lines.length; i++) {
                            if (lines[i].trim()) {
                                const values = lines[i].split(',');
                                const prospect = {
                                    prospect_id: 'IMP_' + Date.now() + '_' + i,
                                    name: values[0] || 'Imported Contact',
                                    company: values[1] || 'Unknown Company',
                                    email: values[2] || `contact${i}@example.com`,
                                    industry: values[3] || 'insurance',
                                    stage: 'new',
                                    lastContact: new Date().toISOString().split('T')[0],
                                    title: 'Contact',
                                    phone: '+44 XXXX XXXX',
                                    notes: 'Imported from CSV'
                                };
                                
                                // Check if prospect already exists
                                if (!appData.prospects.find(p => p.email === prospect.email)) {
                                    appData.prospects.push(prospect);
                                    importedCount++;
                                }
                            }
                        }
                        
                        renderProspectPipeline();
                        showNotification('Imported ' + importedCount + ' new prospects!', 'success');
                        appData.dashboardMetrics.total_prospects += importedCount;
                    };
                    reader.readAsText(file);
                }
            };
            
            input.click();
        }
        
        function updateAnalytics() {
            renderAnalytics();
            renderRecentActivities();
        }

        function exportCompanies() {
            alert('Company data exported to CSV!\n\nFile includes:\n• Company names & websites\n• Industry classifications\n• Contact information\n• Hiring activity\n• Engagement history');
        }

        function createNewTemplate() {
            alert('Template Builder\n\n• Choose industry vertical\n• Select template type\n• Customize messaging\n• Add personalization tags\n• Preview & save');
        }

        // Additional utility functions
        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 12px 20px;
                border-radius: 6px;
                color: white;
                font-weight: 500;
                z-index: 10000;
                max-width: 350px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                transition: all 0.3s ease;
            `;
            
            // Set color based on type
            switch(type) {
                case 'success':
                    notification.style.backgroundColor = '#10B981';
                    break;
                case 'error':
                    notification.style.backgroundColor = '#EF4444';
                    break;
                case 'warning':
                    notification.style.backgroundColor = '#F59E0B';
                    break;
                default:
                    notification.style.backgroundColor = '#3B82F6';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remove after 4 seconds
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 4000);
        }
        
        function trackCompetitor(company, jobTitle) {
            showNotification('Now tracking hiring activity for ' + company + ' - ' + jobTitle, 'info');
            
            // Add to tracking list (in a real app, this would go to a database)
            if (!window.competitorTracking) {
                window.competitorTracking = [];
            }
            
            window.competitorTracking.push({
                company,
                jobTitle,
                dateAdded: new Date().toISOString(),
                alerts: true
            });
        }
        
        function viewCompanyProfile(company, industry) {
            const companyData = {
                name: company,
                industry: industry,
                employees: Math.floor(Math.random() * 5000) + 100,
                revenue: '£' + Math.floor(Math.random() * 100) + 'M+',
                locations: ['London', 'Manchester', 'Birmingham'][Math.floor(Math.random() * 3)],
                foundedYear: 1990 + Math.floor(Math.random() * 30),
                techStack: ['Salesforce', 'Microsoft Office', 'SAP'][Math.floor(Math.random() * 3)],
                recentHires: Math.floor(Math.random() * 50) + 10,
                avgSalary: '£' + (35000 + Math.floor(Math.random() * 40000)).toLocaleString()
            };
            
            const profileWindow = window.open('', '_blank', 'width=900,height=700');
            profileWindow.document.write(`
                <html>
                    <head>
                        <title>Company Profile - ${company}</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
                            .container { max-width: 800px; background: white; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                            .header { border-bottom: 2px solid #33808D; padding-bottom: 15px; margin-bottom: 30px; }
                            .company-name { font-size: 28px; font-weight: bold; color: #333; margin-bottom: 5px; }
                            .industry { color: #666; font-size: 16px; }
                            .section { margin: 25px 0; }
                            .section h3 { color: #33808D; border-bottom: 1px solid #eee; padding-bottom: 8px; }
                            .stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 20px 0; }
                            .stat-card { background: #f8f9fa; padding: 15px; border-radius: 6px; text-align: center; }
                            .stat-value { font-size: 20px; font-weight: bold; color: #33808D; }
                            .stat-label { font-size: 12px; color: #666; margin-top: 5px; }
                            .btn { background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <div class="header">
                                <div class="company-name">${company}</div>
                                <div class="industry">${industry.replace('_', ' ').toUpperCase()}</div>
                            </div>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value">${companyData.employees.toLocaleString()}</div>
                                    <div class="stat-label">Employees</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${companyData.revenue}</div>
                                    <div class="stat-label">Revenue</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">${companyData.foundedYear}</div>
                                    <div class="stat-label">Founded</div>
                                </div>
                            </div>
                            
                            <div class="section">
                                <h3>Company Intelligence</h3>
                                <p><strong>Headquarters:</strong> ${companyData.locations}</p>
                                <p><strong>Technology Stack:</strong> ${companyData.techStack}</p>
                                <p><strong>Recent Hiring Activity:</strong> ${companyData.recentHires} new hires in past 6 months</p>
                                <p><strong>Average Salary:</strong> ${companyData.avgSalary}</p>
                            </div>
                            
                            <div class="section">
                                <h3>Hiring Insights</h3>
                                <p>• Currently hiring for ${Math.floor(Math.random() * 5) + 2} positions</p>
                                <p>• Average time to hire: ${40 + Math.floor(Math.random() * 30)} days</p>
                                <p>• Preferred recruitment channels: LinkedIn (60%), Indeed (25%), Referrals (15%)</p>
                                <p>• Hiring forecast: ${Math.random() > 0.5 ? 'Expanding' : 'Stable'} - ${Math.floor(Math.random() * 20) + 10} positions expected next quarter</p>
                            </div>
                            
                            <div style="text-align: center; margin-top: 30px;">
                                <button class="btn" onclick="startCampaign()">Start Email Campaign</button>
                                <button class="btn" onclick="addToTargets()">Add to Target List</button>
                                <button class="btn" onclick="window.close()">Close</button>
                            </div>
                        </div>
                        
                        <script>
                            function startCampaign() {
                                if (window.opener && !window.opener.closed) {
                                    window.opener.startEmailCampaign('${company}', '${industry}');
                                }
                                window.close();
                            }
                            
                            function addToTargets() {
                                if (window.opener && !window.opener.closed) {
                                    window.opener.addToTargetList('${company}', '${industry}');
                                }
                                window.close();
                            }
                        </script>
                    </body>
                </html>
            `);
        }
        
        function useTemplate(industry, templateType) {
            const template = appData.emailTemplates[industry][templateType];
            
            // Show template usage modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 8px; max-width: 600px; width: 90%;">
                    <h3 style="margin-top: 0;">Use Template: ${templateType.replace('_', ' ').toUpperCase()}</h3>
                    <p>Select prospects to send this template to:</p>
                    
                    <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
                        ${appData.prospects.filter(p => p.industry === industry).map(p => `
                            <label style="display: block; margin: 8px 0; cursor: pointer;">
                                <input type="checkbox" value="${p.email}" style="margin-right: 8px;">
                                ${p.name} - ${p.company} (${p.stage.toUpperCase()})
                            </label>
                        `).join('')}
                    </div>
                    
                    <div style="margin-top: 20px; text-align: right;">
                        <button onclick="closeModal(this)" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin-right: 10px;">Cancel</button>
                        <button onclick="sendToSelected(this)" style="background: #33808D; color: white; border: none; padding: 10px 20px; border-radius: 4px;">Send Emails</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function sendToSelected(button) {
            const modal = button.closest('div').closest('div').closest('div');
            const checkboxes = modal.querySelectorAll('input[type="checkbox"]:checked');
            
            if (checkboxes.length === 0) {
                alert('Please select at least one prospect.');
                return;
            }
            
            checkboxes.forEach(checkbox => {
                const email = checkbox.value;
                const prospect = appData.prospects.find(p => p.email === email);
                if (prospect) {
                    // Update prospect stage and last contact
                    prospect.stage = 'contacted';
                    prospect.lastContact = new Date().toISOString().split('T')[0];
                    
                    // Track email
                    emailTracking.trackEmail(prospect.prospect_id || prospect.email, 'template_send');
                }
            });
            
            modal.remove();
            renderProspectPipeline();
            showNotification('Template sent to ' + checkboxes.length + ' prospect(s)!', 'success');
        }
        
        function closeModal(button) {
            const modal = button.closest('div').closest('div').closest('div');
            modal.remove();
        }
        
        function duplicateTemplate(industry, templateType) {
            const template = appData.emailTemplates[industry][templateType];
            const newName = prompt('Enter name for duplicated template:', templateType + '_copy');
            
            if (newName && newName !== templateType) {
                appData.emailTemplates[industry][newName] = {
                    subject: template.subject + ' (Copy)',
                    body: template.body
                };
                renderEmailTemplates();
                showNotification('Template duplicated successfully!', 'success');
            }
        }

        // Additional enterprise functions for the ultimate platform
        
        // Render GitHub talent intelligence
        function renderGitHubTalentIntelligence() {
            const container = document.getElementById('github-developers');
            if (!container) return;
            
            const developers = appData.githubTalentIntelligence.developer_profiles;
            
            container.innerHTML = developers.map(dev => `
                <div class="card" style="margin-bottom: 16px; border-left: 4px solid ${dev.available ? 'var(--color-success)' : 'var(--color-warning)'}; position: relative;">
                    <div style="position: absolute; top: 12px; right: 12px;">
                        <span class="status ${dev.available ? 'status--success' : 'status--warning'}">
                            ${dev.available ? 'AVAILABLE' : 'NOT AVAILABLE'}
                        </span>
                    </div>
                    
                    <div style="display: flex; gap: 20px;">
                        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 28px; font-weight: bold; flex-shrink: 0;">
                            ${dev.name.split(' ').map(n => n[0]).join('')}
                        </div>
                        
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                <h3 style="margin: 0; font-size: 20px;">${dev.name}</h3>
                                <a href="${dev.github_profile}" target="_blank" style="margin-left: 12px; color: var(--color-primary);">
                                    <i class="fab fa-github"></i> @${dev.username}
                                </a>
                            </div>
                            
                            <div style="font-size: 14px; color: var(--color-text-secondary); margin-bottom: 8px;">
                                <i class="fas fa-map-marker-alt"></i> ${dev.location} • 
                                <span style="color: var(--color-primary); font-weight: 600;">${dev.specialization}</span> • 
                                ${dev.experience_level}
                            </div>
                            
                            <div style="display: flex; flex-wrap: gap; gap: 8px; margin: 12px 0;">
                                ${dev.languages.map(lang => `
                                    <span style="background: var(--color-bg-1); padding: 4px 10px; border-radius: 12px; font-size: 12px; font-weight: 500;">
                                        ${lang}
                                    </span>
                                `).join('')}
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin: 16px 0;">
                                <div class="stat">
                                    <div class="stat-value">${dev.repositories}</div>
                                    <div class="stat-label">Repositories</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">${dev.contributions_last_year.toLocaleString()}</div>
                                    <div class="stat-label">Contributions</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">${dev.followers}</div>
                                    <div class="stat-label">Followers</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">${dev.code_quality_score}</div>
                                    <div class="stat-label">Code Quality</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">${dev.collaboration_score}</div>
                                    <div class="stat-label">Collaboration</div>
                                </div>
                                <div class="stat">
                                    <div class="stat-value">${dev.influence_rating}</div>
                                    <div class="stat-label">Influence</div>
                                </div>
                            </div>
                            
                            <div style="background: var(--color-bg-2); padding: 12px; border-radius: 6px; margin: 12px 0;">
                                <strong>Top Projects:</strong> '+dev.top_projects.join(', ')+'<br>
                                <strong>Salary Expectation:</strong> ${dev.salary_expectation}<br>
                                <strong>Contact:</strong> ${dev.email}
                            </div>
                            
                            <div style="display: flex; gap: 8px; margin-top: 12px;">
                                <button class="btn btn--primary btn--sm" onclick="contactGitHubDeveloper('${dev.username}')">
                                    <i class="fas fa-envelope"></i> Contact Developer
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="viewGitHubProfile('${dev.github_profile}')">
                                    <i class="fab fa-github"></i> View GitHub
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="analyzeGitHubCode('${dev.username}')">
                                    <i class="fas fa-code"></i> Analyze Code
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="addToTalentPool('${dev.username}')">
                                    <i class="fas fa-user-plus"></i> Add to Pool
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // Render candidate portal
        function renderCandidatePortal() {
            const container = document.getElementById('candidate-portal-features');
            if (!container) return;
            
            const portal = appData.candidatePortal;
            
            container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 16px; margin-bottom: 24px;">
                    <div class="card" style="margin-bottom: 0; background: var(--color-bg-1);">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-user-circle"></i> Profile Management</h4>
                        </div>
                        <div style="font-size: 13px; line-height: 1.6;">
                            • Complete candidate profiles<br>
                            • Skills & experience tracking<br>
                            • Resume/CV uploads<br>
                            • Portfolio showcasing<br>
                            • Preference settings
                        </div>
                        <button class="btn btn--primary btn--sm" style="width: 100%; margin-top: 12px;" onclick="viewSampleProfile()">
                            <i class="fas fa-eye"></i> View Sample Profile
                        </button>
                    </div>
                    
                    <div class="card" style="margin-bottom: 0; background: var(--color-bg-3);">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-clipboard-check"></i> Skills Assessment</h4>
                        </div>
                        <div style="font-size: 13px; line-height: 1.6;">
                            • Industry-specific tests<br>
                            • Technical skill validation<br>
                            • Soft skills evaluation<br>
                            • Certification tracking<br>
                            • Progress monitoring
                        </div>
                        <button class="btn btn--primary btn--sm" style="width: 100%; margin-top: 12px;" onclick="launchAssessment()">
                            <i class="fas fa-play"></i> Start Assessment
                        </button>
                    </div>
                    
                    <div class="card" style="margin-bottom: 0; background: var(--color-bg-5);">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-graduation-cap"></i> Training Resources</h4>
                        </div>
                        <div style="font-size: 13px; line-height: 1.6;">
                            • Personalized learning paths<br>
                            • Certification prep courses<br>
                            • Video tutorials<br>
                            • Practice assessments<br>
                            • Career mentoring
                        </div>
                        <button class="btn btn--primary btn--sm" style="width: 100%; margin-top: 12px;" onclick="browseTraining()">
                            <i class="fas fa-book"></i> Browse Courses
                        </button>
                    </div>
                </div>
                
                <div class="card" style="margin-bottom: 16px;">
                    <div class="card-header">
                        <h3 class="card-title">Active Training Modules</h3>
                    </div>
                    ${portal.training_modules.map(module => `
                        <div style="padding: 12px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="font-weight: 600;">${module.name}</div>
                                <div style="font-size: 12px; color: var(--color-text-secondary);">
                                    ${module.enrolled} enrolled • ${module.completed} completed
                                </div>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 20px; font-weight: bold; color: var(--color-primary);">
                                    ${Math.round((module.completed / module.enrolled) * 100)}%
                                </div>
                                <div style="font-size: 11px; color: var(--color-text-secondary);">Completion Rate</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px;">
                    <div class="card" style="margin-bottom: 0;">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-briefcase"></i> Application Tracking</h4>
                        </div>
                        <div style="font-size: 13px; color: var(--color-text-secondary);">
                            Real-time application status updates, interview scheduling, and feedback collection.
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 0;">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-calendar-alt"></i> Interview Scheduling</h4>
                        </div>
                        <div style="font-size: 13px; color: var(--color-text-secondary);">
                            Self-service booking with calendar integration and automated reminders.
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 0;">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-chart-line"></i> Career Planning</h4>
                        </div>
                        <div style="font-size: 13px; color: var(--color-text-secondary);">
                            Goal setting, progression pathways, and personalized recommendations.
                        </div>
                    </div>
                    
                    <div class="card" style="margin-bottom: 0;">
                        <div class="card-header">
                            <h4 style="margin: 0;"><i class="fas fa-users"></i> Peer Networking</h4>
                        </div>
                        <div style="font-size: 13px; color: var(--color-text-secondary);">
                            Connect with industry professionals, join discussion forums, and collaborate.
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Render business intelligence
        function renderBusinessIntelligence() {
            const container = document.getElementById('intelligence-feed');
            if (!container) return;
            
            const enrichedCompanies = appData.businessIntelligence.enriched_companies;
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Recently Enriched Companies</h3>
                    </div>
                    
                    ${enrichedCompanies.map(company => `
                        <div style="padding: 16px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px;">${company.company}</div>
                                <div style="font-size: 12px; color: var(--color-text-secondary); margin-bottom: 8px;">${company.industry.toUpperCase()} | ${company.employees} employees | ${company.revenue} revenue</div>
                                <div style="font-size: 12px; line-height: 1.4;">
                                    <div><strong>Tech Stack:</strong> ${company.tech_stack.join(', ')}</div>
                                    <div><strong>Recent News:</strong> ${company.recent_news}</div>
                                    <div><strong>Key Pain Points:</strong> ${company.pain_points.join(', ')}</div>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn--primary btn--sm" onclick="targetCompanyForOutreach('${company.company}', '${company.industry}')">
                                    <i class="fas fa-crosshairs"></i> Target
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // Render candidate intelligence
        function renderCandidateIntelligence() {
            const container = document.getElementById('candidate-profiles');
            if (!container) return;
            
            const candidatePool = appData.candidateIntelligence.candidate_pool;
            
            container.innerHTML = `
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">High-Quality Candidate Pool</h3>
                    </div>
                    
                    ${candidatePool.map(candidate => `
                        <div style="padding: 16px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: start;">
                            <div style="flex: 1;">
                                <div style="display: flex; align-items: center; margin-bottom: 8px;">
                                    <div style="font-weight: 600; font-size: 16px; margin-right: 12px;">${candidate.name}</div>
                                    <div style="background: var(--color-success); color: white; padding: 2px 6px; border-radius: 10px; font-size: 10px;">${candidate.skills_score}/100</div>
                                </div>
                                <div style="font-size: 14px; color: var(--color-primary); margin-bottom: 4px;">${candidate.title} at ${candidate.current_company}</div>
                                <div style="font-size: 12px; color: var(--color-text-secondary); margin-bottom: 8px;">
                                    ${candidate.experience_years} years experience | ${candidate.location} | ${candidate.salary_expectation}
                                </div>
                                <div style="font-size: 11px;">
                                    <strong>Certifications:</strong> ${candidate.certifications.join(', ')}<br>
                                    <strong>Availability:</strong> ${candidate.availability}
                                </div>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                <button class="btn btn--primary btn--sm" onclick="contactCandidate('${candidate.candidate_id}')">
                                    <i class="fas fa-phone"></i> Contact
                                </button>
                                <button class="btn btn--secondary btn--sm" onclick="viewCandidateProfile('${candidate.candidate_id}')">
                                    <i class="fas fa-user"></i> Profile
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }
        
        // Render email automation
        function renderEmailAutomation() {
            // Already handled by existing renderEmailTemplates function
            renderEmailTemplates();
        }
        
        // Render advanced CRM
        function renderAdvancedCRM() {
            renderProspectPipeline();
            
            // Render deal activity
            const container = document.getElementById('deal-activity');
            if (!container) return;
            
            const dealActivities = [
                { prospect: 'Sarah Johnson', company: 'Marsh McLennan', activity: 'Demo completed', value: '£25,000', stage: 'Proposal' },
                { prospect: 'Emma Williams', company: 'Vistage UK', activity: 'Contract signed', value: '£15,000', stage: 'Client' },
                { prospect: 'David Brown', company: 'Travis Perkins', activity: 'Follow-up scheduled', value: '£18,000', stage: 'Demo' }
            ];
            
            container.innerHTML = dealActivities.map(deal => `
                <div style="padding: 12px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600;">${deal.prospect} - ${deal.company}</div>
                        <div style="font-size: 12px; color: var(--color-text-secondary);">${deal.activity}</div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-weight: 600; color: var(--color-primary);">${deal.value}</div>
                        <div style="font-size: 11px; color: var(--color-text-secondary);">${deal.stage}</div>
                    </div>
                </div>
            `).join('');
        }
        
        // Render automation workflows
        function renderAutomationWorkflows() {
            // Already handled in the HTML structure
        }
        
        // Render advanced analytics
        function renderAdvancedAnalytics() {
            renderAnalytics(); // Use existing function
        }
        
        // Render live activity feed
        function renderLiveActivityFeed() {
            const container = document.getElementById('live-activity-feed');
            if (!container) return;
            
            const activities = appData.liveActivityFeed.slice(0, 10);
            
            container.innerHTML = activities.map(activity => {
                const timeAgo = getTimeAgo(new Date(activity.timestamp));
                let iconClass = 'fas fa-bell';
                let iconColor = '#3B82F6';
                
                switch(activity.type) {
                    case 'voice_call_connected':
                        iconClass = 'fas fa-phone';
                        iconColor = '#10B981';
                        break;
                    case 'email_opened':
                        iconClass = 'fas fa-envelope-open';
                        iconColor = '#F59E0B';
                        break;
                    case 'prospect_discovered':
                        iconClass = 'fas fa-search-plus';
                        iconColor = '#8B5CF6';
                        break;
                }
                
                return `
                    <div style="display: flex; align-items: start; padding: 12px; border-bottom: 1px solid var(--color-border);">
                        <div style="width: 32px; height: 32px; border-radius: 50%; background: ${iconColor}15; display: flex; align-items: center; justify-content: center; margin-right: 12px; flex-shrink: 0;">
                            <i class="${iconClass}" style="color: ${iconColor}; font-size: 14px;"></i>
                        </div>
                        <div style="flex: 1; min-width: 0;">
                            <div style="font-weight: 500; font-size: 14px; line-height: 1.3;">${activity.description}</div>
                            <div style="font-size: 12px; color: var(--color-text-secondary); margin-top: 2px;">${activity.outcome}</div>
                        </div>
                        <div style="font-size: 11px; color: var(--color-text-secondary); flex-shrink: 0; margin-left: 8px;">${timeAgo}</div>
                    </div>
                `;
            }).join('');
        }
        
        // Additional utility functions
        function targetCompanyForOutreach(company, industry) {
            showNotification(`${company} added to priority target list for ${industry} outreach!`, 'success');
        }
        
        function contactCandidate(candidateId) {
            showNotification('Contacting candidate via AI voice agent...', 'info');
            setTimeout(() => {
                showNotification('Contact initiated! Candidate responded positively.', 'success');
            }, 2000);
        }
        
        function viewCandidateProfile(candidateId) {
            showNotification('Loading comprehensive candidate intelligence profile...', 'info');
        }
        
        function configureScrapingSources() {
            showNotification('Opening scraping configuration panel...', 'info');
        }
        
        function startGoogleMapsSearch() {
            showNotification('Google Maps scraper activated! Discovering prospects...', 'success');
        }
        
        function enrichCompanyData() {
            showNotification('Companies House enrichment running... Adding financial & director data.', 'info');
        }
        
        function discoverLinkedInContacts() {
            showNotification('LinkedIn intelligence engine discovering decision makers...', 'success');
        }
        
        function createVoiceCampaign() {
            launchVoiceCampaign();
        }
        
        function viewCallRecordings(campaignId) {
            showNotification('Loading call recordings and transcripts...', 'info');
        }
        
        function editVoiceScript(campaignId) {
            showNotification('Opening AI voice script editor...', 'info');
        }
        
        function pauseCampaign(campaignId) {
            showNotification('Voice campaign paused. All active calls will complete.', 'warning');
        }
        
        function discoverCandidates() {
            showNotification('Candidate discovery engine activated across LinkedIn and job boards...', 'success');
        }
        
        function viewCandidatePool() {
            showNotification('Loading complete candidate intelligence database...', 'info');
        }
        
        function runSkillsAnalysis() {
            showNotification('AI skills analyzer processing candidate certifications and experience...', 'info');
        }
        
        function benchmarkSalaries() {
            showNotification('Generating real-time salary benchmarks across all industries...', 'info');
        }
        
        function createEmailSequence() {
            showNotification('Opening advanced email sequence builder...', 'info');
        }
        
        function viewSequence(industry) {
            showNotification(`Loading ${industry} email sequence performance data...`, 'info');
        }
        
        function editSequence(industry) {
            showNotification(`Opening ${industry} email sequence editor...`, 'info');
        }
        
        function importProspects() {
            importContacts(); // Use existing function
        }
        
        function exportPipeline() {
            showNotification('Exporting complete CRM pipeline with all prospect intelligence...', 'info');
        }
        
        function createWorkflow() {
            showNotification('Opening automation workflow builder...', 'info');
        }
        
        function configureWorkflow(workflowType) {
            showNotification(`Configuring ${workflowType} workflow parameters...`, 'info');
        }
        
        function exportAnalyticsReport() {
            showNotification('Generating comprehensive analytics report with ROI analysis...', 'info');
        }
        
        function exportIntelligenceReport() {
            showNotification('Exporting business intelligence report with market analysis...', 'info');
        }
        
        function startEmailSequence() {
            showNotification('Multi-channel email sequence activated for all active prospects!', 'success');
        }
        
        // GitHub talent intelligence functions
        function searchGitHubTalent() {
            showNotification('Searching GitHub for qualified developers... Analyzing 1,250+ profiles.', 'info');
            setTimeout(() => {
                showNotification('GitHub search complete! Found 187 qualified developers matching your criteria.', 'success');
            }, 2000);
        }
        
        function contactGitHubDeveloper(username) {
            showNotification(`Initiating contact with @${username} via email and LinkedIn...`, 'info');
            setTimeout(() => {
                showNotification('Personalized outreach email sent! Tracking engagement.', 'success');
            }, 1500);
        }
        
        function viewGitHubProfile(profileUrl) {
            window.open(profileUrl, '_blank');
            showNotification('Opening GitHub profile in new tab...', 'info');
        }
        
        function analyzeGitHubCode(username) {
            showNotification(`AI analyzing code quality for @${username}... This may take a moment.`, 'info');
            setTimeout(() => {
                const score = 85 + Math.floor(Math.random() * 10);
                showNotification(`Code analysis complete! Quality score: ${score}/100 - Excellent coding standards detected.`, 'success');
            }, 3000);
        }
        
        function addToTalentPool(username) {
            showNotification(`@${username} added to talent pool! Automated nurture sequence activated.`, 'success');
        }
        
        // Candidate portal functions
        function viewPortalDashboard() {
            const dashboardWindow = window.open('', '_blank', 'width=1200,height=800');
            dashboardWindow.document.write(`
                <html>
                    <head>
                        <title>TalentEdge Candidate Portal - Dashboard</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; margin: 0; }
                            .container { max-width: 1200px; margin: 0 auto; }
                            .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; }
                            .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }
                            .stat-card { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
                            .stat-value { font-size: 32px; font-weight: bold; color: #667eea; }
                            .stat-label { font-size: 14px; color: #666; margin-top: 5px; }
                            .section { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px; }
                        </style>
                    </head>
                    <body>
                        <div class="container">
                            <div class="header">
                                <h1 style="margin: 0 0 10px 0;">Welcome to Your TalentEdge Portal</h1>
                                <p style="margin: 0; opacity: 0.9;">Manage your profile, skills, and career development in one place</p>
                            </div>
                            
                            <div class="stats">
                                <div class="stat-card">
                                    <div class="stat-value">342</div>
                                    <div class="stat-label">Registered Candidates</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">128</div>
                                    <div class="stat-label">Active Applications</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">215</div>
                                    <div class="stat-label">Assessments Completed</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value">156</div>
                                    <div class="stat-label">Certifications Verified</div>
                                </div>
                            </div>
                            
                            <div class="section">
                                <h2>Portal Features</h2>
                                <ul>
                                    <li>Complete candidate profile with skills and experience</li>
                                    <li>Industry-specific technical and soft skill assessments</li>
                                    <li>Real-time application status tracking</li>
                                    <li>Self-service interview scheduling</li>
                                    <li>Personalized training and certification paths</li>
                                    <li>Career progression planning and goal setting</li>
                                    <li>Peer networking and mentorship connections</li>
                                </ul>
                            </div>
                        </div>
                    </body>
                </html>
            `);
            showNotification('Opening candidate portal dashboard...', 'info');
        }
        
        function viewSampleProfile() {
            showNotification('Loading sample candidate profile...', 'info');
        }
        
        function launchAssessment() {
            showNotification('Launching skills assessment portal...', 'info');
        }
        
        function browseTraining() {
            showNotification('Opening training resource library...', 'info');
        }
        
        // Show API configuration modal
        function showAPIConfiguration() {
            showNotification('API Configuration: This demo runs client-side. For production, implement a secure backend server.', 'warning');
            
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; z-index: 10000; overflow-y: auto; padding: 20px;';
            
            const content = document.createElement('div');
            content.style.cssText = 'background: white; padding: 30px; border-radius: 12px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto;';
            content.innerHTML =
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">
                        <div>
                            <h2 style="margin: 0; color: #333;">API Configuration Center</h2>
                            <p style="margin: 5px 0 0 0; color: #666; font-size: 14px;">Configure your API integrations for real data</p>
                        </div>
                        <button onclick="this.closest('div').parentNode.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #999;">&times;</button>
                    </div>
                    
                    '<div style="background: #fff3cd; border: 2px solid #ffc107; border-radius: 8px; padding: 15px; margin-bottom: 25px;">' +
                        <div style="display: flex; align-items: start;">
                            <i class="fas fa-exclamation-triangle" style="color: #ff9800; font-size: 24px; margin-right: 12px;"></i>
                            <div style="flex: 1;">
                                <strong style="color: #333;">⚠️ CRITICAL SECURITY WARNING</strong>
                                <div style="font-size: 13px; color: #666; margin-top: 5px; line-height: 1.5;">
                                    This application runs entirely in your browser (client-side). <strong>NEVER enter real API keys here</strong> - they would be visible to anyone inspecting the page source.
                                    <br><br>
                                    <strong>For production use:</strong>
                                    <ul style="margin: 8px 0 0 20px; padding: 0;">
                                        <li>Build a secure backend server (Node.js, Python, etc.)</li>
                                        <li>Store API keys in environment variables on the server</li>
                                        <li>Create API endpoints that proxy requests securely</li>
                                        <li>Never expose keys in client-side code</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- OpenAI Configuration -->
                    <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #10B981;">
                        <h3 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                            <i class="fas fa-brain" style="margin-right: 8px; color: #10B981;"></i>
                            OpenAI API (GPT-4 Email Generation)
                        </h3>
                        <div style="font-size: 13px; color: #666; margin-bottom: 12px;">
                            <strong>Purpose:</strong> AI-powered email personalization and content generation<br>
                            <strong>Endpoint:</strong> https://api.openai.com/v1/chat/completions<br>
                            <strong>Cost:</strong> ~$0.03 per email generated (GPT-4)<br>
                            <strong>Demo Mode:</strong> Using simulated AI responses
                        </div>
                        <button class="btn btn--secondary btn--sm" onclick="testAPIConnection('openai')">
                            <i class="fas fa-flask"></i> Test Connection (Demo)
                        </button>
                    </div>
                    
                    <!-- Companies House Configuration -->
                    <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #3B82F6;">
                        <h3 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                            <i class="fas fa-building" style="margin-right: 8px; color: #3B82F6;"></i>
                            Companies House API (UK Business Data)
                        </h3>
                        <div style="font-size: 13px; color: #666; margin-bottom: 12px;">
                            <strong>Purpose:</strong> Company information, directors, financial filings<br>
                            <strong>Endpoint:</strong> https://api.company-information.service.gov.uk<br>
                            <strong>Cost:</strong> Free (rate limited: 600 requests/5 minutes)<br>
                            <strong>Demo Mode:</strong> Using cached company data
                        </div>
                        <button class="btn btn--secondary btn--sm" onclick="testAPIConnection('companies_house')">
                            <i class="fas fa-flask"></i> Test Connection (Demo)
                        </button>
                    </div>
                    
                    <!-- Google Maps Configuration -->
                    <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #F59E0B;">
                        <h3 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                            <i class="fas fa-map-marker-alt" style="margin-right: 8px; color: #F59E0B;"></i>
                            Google Maps API (Business Discovery)
                        </h3>
                        <div style="font-size: 13px; color: #666; margin-bottom: 12px;">
                            <strong>Purpose:</strong> Find businesses by location, get contact info & reviews<br>
                            <strong>Endpoint:</strong> https://maps.googleapis.com/maps/api/place<br>
                            <strong>Cost:</strong> $17 per 1,000 searches (Places API)<br>
                            <strong>Demo Mode:</strong> Using sample business data
                        </div>
                        <button class="btn btn--secondary btn--sm" onclick="testAPIConnection('google_maps')">
                            <i class="fas fa-flask"></i> Test Connection (Demo)
                        </button>
                    </div>
                    
                    <!-- Resend Configuration -->
                    <div style="margin-bottom: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #8B5CF6;">
                        <h3 style="margin: 0 0 15px 0; font-size: 16px; display: flex; align-items: center;">
                            <i class="fas fa-envelope" style="margin-right: 8px; color: #8B5CF6;"></i>
                            Resend API (Email Delivery)
                        </h3>
                        <div style="font-size: 13px; color: #666; margin-bottom: 12px;">
                            <strong>Purpose:</strong> Send transactional emails with tracking<br>
                            <strong>Endpoint:</strong> https://api.resend.com/emails<br>
                            <strong>Cost:</strong> Free tier: 3,000 emails/month, then $20/month<br>
                            <strong>Demo Mode:</strong> Simulating email sends with tracking
                        </div>
                        <button class="btn btn--secondary btn--sm" onclick="testAPIConnection('resend')">
                            <i class="fas fa-flask"></i> Test Connection (Demo)
                        </button>
                    </div>
                    
                    <div style="background: #e3f2fd; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
                        <strong style="color: #1976d2;">💡 Production Implementation Guide:</strong>
                        <div style="font-size: 13px; color: #555; margin-top: 8px; line-height: 1.5;">
                            1. Create a backend server (Express.js, Flask, etc.)<br>
                            2. Store API keys in .env file (never commit to git)<br>
                            3. Create secure endpoints: /api/generate-email, /api/search-companies, etc.<br>
                            4. Add authentication & rate limiting to your endpoints<br>
                            5. Use HTTPS for all communications<br>
                            6. Implement proper error handling & logging
                        </div>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="this.closest('div').parentNode.remove()" class="btn btn--primary" style="padding: 12px 30px;">
                            Continue with Demo Mode
                        </button>
                    </div>
                </div>
            `;
            
            `;
            document.body.appendChild(modal);
        }
        
        // Test API connection (demo mode)
        function testAPIConnection(apiName) {
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Testing...';
            button.disabled = true;
            
            setTimeout(() => {
                button.innerHTML = '<i class="fas fa-check"></i> Demo Mode Active';
                button.style.background = '#10B981';
                button.style.color = 'white';
                
                setTimeout(() => {
                    button.innerHTML = originalText;
                    button.disabled = false;
                    button.style.background = '';
                    button.style.color = '';
                }, 2000);
            }, 1500);
        }
        
        // Simulate OpenAI API call for email generation
        async function simulateOpenAIGeneration(type, data) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    if (type === 'email_generation') {
                        resolve({
                            subject: `${data.industry === 'insurance' ? 'FCA compliance' : data.industry === 'coaching' ? 'ICF certified coaches' : 'Branch manager'} expertise at ${data.company}`,
                            body: `Hi ${data.contact},\n\nI noticed ${data.company}'s impressive work in the ${data.industry} sector...\n\nBest regards,\nBen Palmer\nTalentEdge AI`
                        });
                    }
                }, 1000);
            });
        }
        
        // Simulate Resend email API
        async function simulateResendEmail(to, subject, body) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve({
                        id: 're_' + Math.random().toString(36).substr(2, 16),
                        from: 'ben@talentedge.ai',
                        to: to,
                        created_at: new Date().toISOString()
                    });
                }, 800);
            });
        }
        
        // Initialize the ultimate platform when the page loads
        // --- Patch simpler GitHub renderer for validator compatibility
window.renderGitHubTalentIntelligence = function() {
  const container = document.getElementById('github-developers');
  if (!container) return;
  const devs = (appData.githubTalentIntelligence && appData.githubTalentIntelligence.developer_profiles) || [];
  var html = '';
  devs.forEach(function(dev) {
    html += '<div class="card" style="margin-bottom:16px;border-left:4px solid ' + (dev.available ? 'var(--color-success)' : 'var(--color-warning)') + ';position:relative;">' +
            '<div style="position:absolute;top:12px;right:12px;"><span class="status ' + (dev.available ? 'status--success' : 'status--warning') + '">' + (dev.available ? 'AVAILABLE' : 'NOT AVAILABLE') + '</span></div>' +
            '<div style="display:flex;gap:20px;">' +
              '<div style="width:80px;height:80px;background:#667eea;border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:28px;font-weight:bold;flex-shrink:0;">' +
                dev.name.split(' ').map(function(n){return n[0];}).join('') +
              '</div>' +
              '<div style="flex:1;">' +
                '<h3 style="margin:0;font-size:20px;">' + dev.name + '</h3>' +
                '<div style="font-size:14px;color:var(--color-text-secondary);margin-bottom:4px;">' + dev.location + ' • ' + dev.specialization + '</div>' +
                '<div style="font-size:14px;margin:8px 0;">Repos: ' + dev.repositories + ' | Contributions: ' + dev.contributions_last_year + '</div>' +
                '<button class="btn btn--primary btn--sm" onclick="contactGitHubDeveloper(\'' + dev.username + '\')">Contact</button>' +
              '</div>' +
            '</div>' +
          '</div>';
  });
  container.innerHTML = html;
};

document.addEventListener('DOMContentLoaded', function() {
            initApp();
            
            // Show security notice on first load
            setTimeout(() => {
                showNotification('🚀 TalentEdge AI Platform Loaded - Demo Mode Active', 'success');
            }, 1000);
            
            // Show API configuration reminder after 5 seconds
            setTimeout(() => {
                showNotification('💡 Tip: Click "Configure APIs" in sidebar for production setup guide', 'info');
            }, 5000);
        });
    </script>
</body>
</html>